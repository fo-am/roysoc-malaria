<!DOCTYPE html>
<html>
  <head>
    <title>map</title>
    <link href="css/style.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="codemirror/codemirror.css">
    <script src="codemirror/codemirror.js"></script>
    <script src="codemirror/scheme/scheme.js"></script>
    
    <body style="color:#594430; background:#fff;">
      <div>
        <canvas class="canvas" id="webgl-canvas" 
		style="background: url('images/island.png'); position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh; background-size: 100% auto; background-repeat: no-repeat;"></canvas>
        <canvas class="canvas" id="canvas"></canvas>
<!--	<div class="code-button-container">
	  <button id="show-code-button" onclick="show_code();">Show code</button>
	</div> -->
	<div class="code-container">
	  <button onclick="hide_code();">Hide code</button>
	  <button onclick="run_code();">Run me</button>
	  <textarea id="code"></textarea>
	  output
	  <pre><div id="output"></div></pre>
	</div>
      </div>  
    </body>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="flx/js/glMatrix.js"></script>
    <script src="flx/js/glObjLoader.js"></script>
    <script src="flx/js/glPlyLoader.js"></script>
    <script src="flx/js/ditto.js"></script>

    <script>
      function show_code() {
          $('.code-container').show(); 
          $('#show-code-button').hide(); 
          // Refresh CodeMirror
          $('.CodeMirror').each(function(i, el){ 
              el.CodeMirror.refresh(); 
          });      
      }

      function hide_code() {
          $('.code-container').hide(); 
          $('#show-code-button').show();
      }

      var editor=0;

      function run_code() {
          simple_eval(editor.getValue());
      }

      $( document ).ready(function() {
          $('#code').html('{{CODE}}');
          editor = CodeMirror.fromTextArea($("#code")[0], {
             mode: "scheme"
          });

          hide_code();
      //init(["scm/vax/vax.jscm"]);
          init_resources({{RESOURCES}});
          init_static('{{SYNTAX}}','{{CODE}}');    
      });
    </script>
</body>
</html>
