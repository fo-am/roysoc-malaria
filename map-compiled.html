<!DOCTYPE html>
<html>
  <head>
    <title>map</title>
    <link href="css/style.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="codemirror/codemirror.css">
    <script src="codemirror/codemirror.js"></script>
    <script src="codemirror/scheme/scheme.js"></script>
    
    <body style="color:#594430; background:#000;">
      <div>
        <canvas class="canvas" id="webgl-canvas" 
		style="background: grey; position: absolute; left: 0px; top: 0px; width: 100vw; height: 100vh;"></canvas>
        <canvas class="canvas" id="canvas"></canvas>
	<div class="code-container" style="display: none;">
	  <button onclick="hide_code();">Hide code</button>
	  <button onclick="run_code();">Run me</button>
	  <textarea id="code"></textarea>
	  output
	  <pre><div id="output"></div></pre>
	</div>
      </div>  
    </body>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="flx/js/glMatrix.js"></script>
    <script src="flx/js/glObjLoader.js"></script>
    <script src="flx/js/glPlyLoader.js"></script>
    <script src="flx/js/ditto.js"></script>

    <script>
      $( document ).ready(function() {
      //init(["scm/vax/vax.jscm"]);
          init_resources({"flx/scm/texture.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define textures ())\n(define textures-load-outstanding 0)\n(define textures-total-load 0)\n\n(define (get-texture name)\n  (foldl\n   (lambda (t r)\n     (if (and (not r) (eq? (car t) name))\n         (cadr t) r))\n   #f\n   textures))\n\n(define (textures-loaded?)\n  (eq? textures-load-outstanding 0))\n\n(define (load-texture-impl! gl name)\n  (if (assoc name textures)\n      name\n      (let ((texture (gl.createTexture)))\n\t(set! textures-load-outstanding (+ textures-load-outstanding 1))\n\t(set! textures-total-load (+ textures-total-load 1))\n        (set! texture.image \n\t      (load-resource-img \n\t       name\n\t       (lambda (image)\n\t\t ;;(msg (list \"loaded\" name))\n\t\t (set! textures-load-outstanding (- textures-load-outstanding 1))\n\t\t (gl.bindTexture gl.TEXTURE_2D texture)\n\t\t (gl.pixelStorei gl.UNPACK_FLIP_Y_WEBGL true)\n\t\t (gl.texImage2D gl.TEXTURE_2D 0 gl.RGBA gl.RGBA gl.UNSIGNED_BYTE image)\n\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MAG_FILTER gl.NEAREST)\n\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MIN_FILTER gl.NEAREST)\n\t\t (gl.bindTexture gl.TEXTURE_2D null)\n\t\t (set! textures (cons (list name texture) textures)))))\n        ;; (console.log (+ \"loading \" name))\n        name)))\n\n(define (bind-texture gl shader name)\n  (let ((texture (get-texture name)))\n    ;; may not have loaded yet\n    (when texture\n          (gl.activeTexture gl.TEXTURE0)\n          (gl.bindTexture gl.TEXTURE_2D texture)\n          (gl.uniform1i shader.texture 0))))\n", "flx/scm/canvas-widgets.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft Copyright (C) 2018 FoAM Kernow\n\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (inside-box? px py x y w h)\n  (and (and (> px x) (< px (+ x w)))\n       (and (> py y) (< py (+ y h)))))\n\n\n(define (draw-circle x y radius)\n  (ctx.beginPath)\n  (ctx.arc x y radius 0 (* Math.PI 2))\n  (ctx.stroke))\n\n(define (draw-line x y x2 y2)\n  (ctx.beginPath)\n  (ctx.moveTo x y)\n  (ctx.lineTo x2 y2)\n  (ctx.stroke))\n\n;; unholy mix of 3d and 2d\n(define (make-mesh-button pos mesh size text fn) \n  (let ((prim (with-state\n\t       (translate pos)\n\t       (load-primitive mesh))))\n    (list pos text size fn \n\t  prim (primitive-screen-pos prim))))\n\n(define (mesh-button-pos b) (list-ref b 0))\n(define (mesh-button-text b) (list-ref b 1))\n(define (mesh-button-size b) (list-ref b 2))\n(define (mesh-button-fn b) (list-ref b 3))\n(define (mesh-button-prim b) (list-ref b 4))\n(define (mesh-button-canvas-pos b) (list-ref b 5))\n\n(define (mesh-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (vx (mesh-button-canvas-pos b)) (mesh-button-size b)) \n     (- (vy (mesh-button-canvas-pos b)) (mesh-button-size b))\n     (+ (vx (mesh-button-canvas-pos b)) (mesh-button-size b)) \n     (+ (vy (mesh-button-canvas-pos b)) (mesh-button-size b)))\n    (if canvas-mouse-clicked\n\t(let ((fn (mesh-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\t(with-primitive \n\t (mesh-button-prim b)\n\t (colour (rndvec))\n\t m)))\n   (else m)))\n\n(define (mesh-button-render! b)\n  (let ((m (ctx.measureText (mesh-button-text b))))\n    (ctx.fillText \n     (mesh-button-text b) \n     (- (vx (mesh-button-canvas-pos b)) (/ m.width 2)) \n     (+ (vy (mesh-button-canvas-pos b)) 20)))\n  (with-primitive \n   (mesh-button-prim b)\n   (rotate (vector 1 1 0.5))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-image-button x y image-name text fn) \n  (let ((image (find-image image-name image-lib)))\n    (list x y image text fn (/ image.width 2) (/ image.height 2))))\n\n(define (image-button-x b) (list-ref b 0))\n(define (image-button-y b) (list-ref b 1))\n(define (image-button-image b) (list-ref b 2))\n(define (image-button-text b) (list-ref b 3))\n(define (image-button-fn b) (list-ref b 4))\n(define (image-button-width b) (list-ref b 5))\n(define (image-button-height b) (list-ref b 6))\n\n(define (image-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (image-button-x b) (image-button-width b)) \n     (- (image-button-y b) (image-button-height b))\n     (* (image-button-width b) 2) \n     (* (image-button-height b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (image-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\tm))\n   (else m)))\n  \n(define (image-button-render! b)\n  (ctx.save)\n  (ctx.translate \n   (image-button-x b)\n   (image-button-y b))\n  (ctx.translate \n   (- (image-button-width b))\n   (- (image-button-height b)))\n  (ctx.drawImage (image-button-image b) 0 0)\n  (ctx.restore)\n  \n  (let ((m (ctx.measureText (image-button-text b))))\n    (ctx.fillText \n     (image-button-text b) \n     (- (image-button-x b) (/ m.width 2)) \n     (+ (image-button-y b) 10))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; an two images, one that animates when clicked\n\n(define (make-animated-button x y image-name image2-name fn) \n  (let ((image (find-image image-name image-lib))\n\t(image2 (find-image image2-name image-lib)))\n    (list x y image image2 fn (/ image.width 2) (/ image.height 2) -1 \"opening\")))\n\n(define (animated-button-x b) (list-ref b 0))\n(define (animated-button-y b) (list-ref b 1))\n(define (animated-button-image b) (list-ref b 2))\n(define (animated-button-image2 b) (list-ref b 3))\n(define (animated-button-fn b) (list-ref b 4))\n(define (animated-button-width b) (list-ref b 5))\n(define (animated-button-height b) (list-ref b 6))\n(define (animated-button-time b) (list-ref b 7))\n(define (animated-button-modify-time b v) (list-replace b 7 v))\n(define (animated-button-state b) (list-ref b 8))\n(define (animated-button-modify-state b v) (list-replace b 8 v))\n\n(define (animated-button-update b m)\n  (set! b (animated-button-modify-time \n\t   b (+ (animated-button-time b) 2)))  \n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (animated-button-x b) (animated-button-width b)) \n     (- (animated-button-y b) (animated-button-height b))\n     (* (animated-button-width b) 2) \n     (* (animated-button-height b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (animated-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\tm))\n   (else m)))\n\n(define (animated-button-render! b)\n  (ctx.save)\n  (ctx.translate \n   (animated-button-x b)\n   (animated-button-y b))\n  (ctx.translate \n   (- (animated-button-width b))\n   (- (animated-button-height b)))\n  (ctx.drawImage (animated-button-image b) 0 0)\n  (ctx.drawImage (animated-button-image2 b) 0 \n\t\t (if (eq? (animated-button-state b) \"filling\")\n\t\t     (- (min 75 (animated-button-time b)) 75)\n\t\t     (- (min 75 (animated-button-time b)))))\n  (ctx.restore))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-textbox x y style gap just text) (list x y style gap just text))\n\n(define (textbox-x t) (list-ref t 0))\n(define (textbox-y t) (list-ref t 1))\n(define (textbox-style t) (list-ref t 2))\n(define (textbox-gap t) (list-ref t 3))\n(define (textbox-just t) (list-ref t 4))\n(define (textbox-text t) (list-ref t 5))\n\n(define (textbox-render! s)\n  (set! ctx.font (textbox-style s))\n  (index-for-each\n   (lambda (i text)\n     (let ((m (ctx.measureText text)))\n       (ctx.fillText \n\ttext\n\t(- (textbox-x s) (/ m.width 2)) \n\t(+ (textbox-y s) (* i (textbox-gap s))))))\n   (textbox-text s))\n  (canvas-init-defaults))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-slider x y w p fn) (list x y w p fn))\n(define (slider-x s) (list-ref s 0))\n(define (slider-y s) (list-ref s 1))\n(define (slider-w s) (list-ref s 2))\n(define (slider-p s) (list-ref s 3))\n(define (slider-update-p s v) (list-replace s 3 v))\n(define (slider-fn s) (list-ref s 4))\n\n(define (slider-update s)\n  (cond\n   ((and (or canvas-is-dragging (or (eq? canvas-mouse-state \"down\") (eq? canvas-mouse-state \"clicked\")))\n\t (inside-box?\n\t  canvas-mouse-x canvas-mouse-y\n\t  (slider-x s) (- (slider-y s) 20)\n\t  (slider-w s) 40))\n    (set! canvas-event-occurred #t)\n    (let ((fn (slider-fn s))) (fn (- canvas-mouse-x (slider-x s))))\n    (slider-update-p s (- canvas-mouse-x (slider-x s))))\n   (else s)))\n\n(define (slider-render! s)\n  (ctx.moveTo (slider-x s) (slider-y s))\n  (ctx.lineTo (+ (slider-x s) (slider-w s)) (slider-y s))\n  (ctx.stroke)\n  (ctx.beginPath)\n  (ctx.moveTo (+ (slider-x s) (slider-p s)) (slider-y s))\n  (ctx.arc (+ (slider-x s) (slider-p s)) (slider-y s) 15 0 (* Math.PI 2))\n  (ctx.closePath)\n  (ctx.fill))\n\n(define (make-window x y w h) (list x y w h))\n\n(define (window-x w) (list-ref w 0))\n(define (window-y w) (list-ref w 1))\n(define (window-w w) (list-ref w 2))\n(define (window-h w) (list-ref w 3))\n\n(define (window-render! w)\n  (let ((grd (ctx.createLinearGradient \n\t      (window-x w) (window-y w) \n\t      (+ (window-x w) (window-w w)) 0)))\n    (set! ctx.globalAlpha 0.2)\n    (grd.addColorStop 0 \"#00ff00\")\n    (grd.addColorStop 1 \"#ffffff\")\n    (set! ctx.fillStyle grd)\n    (ctx.fillRect (window-x w) (window-y w) \n\t\t  (window-w w) (window-h w))\n    (set! ctx.globalAlpha 1)\n    (canvas-init-defaults)))\n\n(define (clamp l u v)\n  (if (< v l) l (if (> v u) u v)))\n\n(define (make-progress-bar x y w h text style p) (list x y w h text style p))\n\n(define (progress-bar-x w) (list-ref w 0))\n(define (progress-bar-y w) (list-ref w 1))\n(define (progress-bar-w w) (list-ref w 2))\n(define (progress-bar-h w) (list-ref w 3))\n(define (progress-bar-text w) (list-ref w 4))\n(define (progress-bar-style w) (list-ref w 5))\n(define (progress-bar-p w) (list-ref w 6))\n(define (progress-bar-update-p w v) (list-replace w 6 v))\n\n(define (progress-bar-render! w)\n  (let ((grd (ctx.createLinearGradient \n\t      (progress-bar-x w) (progress-bar-y w) \n\t      (+ (progress-bar-x w) (progress-bar-w w)) 0)))\n    (set! ctx.strokeStyle \"#000\")\n    (ctx.strokeRect (progress-bar-x w) (progress-bar-y w) \n\t\t    (progress-bar-w w) (progress-bar-h w))\n    (set! ctx.globalAlpha 0.5)\n    (grd.addColorStop 0 \"#00ff00\")\n    (grd.addColorStop 1 \"#ffffff\")\n    (set! ctx.fillStyle grd)\n    (ctx.fillRect (progress-bar-x w) (progress-bar-y w) \n\t\t  (* (progress-bar-w w)\n\t\t     (/ (clamp 0 100 (progress-bar-p w)) 100))\n\t\t  (progress-bar-h w))\n    (set! ctx.globalAlpha 1)\n    (set! ctx.font (progress-bar-style w))\n    (set! ctx.fillStyle \"#000\")\n    (let ((txt (string-append (progress-bar-text w) \" \" \n\t\t\t      (clamp 0 100 (floor (progress-bar-p w))) \"%\")))\n      (let ((m (ctx.measureText txt)))\n\t(ctx.fillText \n\t txt \n\t (- (+ (progress-bar-x w) (/ (progress-bar-w w) 2)) (/ m.width 2)) \n\t (+ (progress-bar-y w) 25))))\n    \n    (canvas-init-defaults)))\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-popup textbox type time) (list textbox type time))\n(define (popup-textbox p) (list-ref p 0))\n(define (popup-type p) (list-ref p 1))\n(define (popup-time p) (list-ref p 2))\n\n(define popups-list \'())\n\n(define (clear-popups!)\n  (set! popups-list \'()))\n\n(define (fire-popup! type text-list)\n  (let ((x (if (eq? type \"bad\") (/ screen-width 2) 300))\n\t(y (if (eq? type \"bad\") 300 500)))\n    (set! popups-list (cons (make-popup \n\t\t\t     (make-textbox\n\t\t\t      x y \n\t\t\t      (if (eq? type \"bad\") \n\t\t\t\t  \"30pt Dosis\" \n\t\t\t\t  \"20pt Dosis\") \n\t\t\t      55 \"centre\" \n\t\t\t      text-list)\n\t\t\t     type\n\t\t\t     (time)) \n\t\t\t    popups-list))))\n\n(define (render-popup! p)\n  (let ((tb (popup-textbox p)))\n    (let ((x (- (/ screen-width 2) 400)) \n\t  (y (- (textbox-y tb) 50))\n\t  (w 800) \n\t  (h 130))\n      (let ((grd (ctx.createLinearGradient x y (+ x w) (+ y h))))\n\t(if (eq? (popup-type p) \"bad\")\n\t    (grd.addColorStop 0 \"#ff0000\")\n\t    (grd.addColorStop 0 \"#359935\"))\n\t(grd.addColorStop 1 \"#ffffff\")\n\t(set! ctx.strokeStyle \"#000\")\n\t(ctx.strokeRect x y w h)\n\t(set! ctx.globalAlpha 0.5)\n\t(set! ctx.fillStyle grd)\n\t(ctx.fillRect x y w h)\n\t(set! ctx.globalAlpha 1)\n\t(canvas-init-defaults)\n\t(textbox-render! tb)))))\n\n(define popup-lifespan 3)\n\n(define (render-popups!)\n  (when (not (null? popups-list))\n\t(render-popup! (car popups-list))\n\t(when (> (- (time) (popup-time (car popups-list))) popup-lifespan)\n\t      (set! popups-list (cdr popups-list)))))\n\n\n", "flx/scm/glsl.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft (C) 2017 FoAM Kernow\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (compile-shader gl type code)\n  (let ((shader (gl.createShader type)))\n    (gl.shaderSource shader code)\n    (gl.compileShader shader)\n    (if (not (gl.getShaderParameter shader gl.COMPILE_STATUS))\n\t(begin\n\t  (alert (gl.getShaderInfoLog shader))\n\t  #f)\n\tshader)))\n\n;; can\'t call this before link time - so can\'t use it to automatically\n;; bind locations to names :( so we need to pass in expected attrib-names\n(define (get-attrib-info-list gl program)\n  (define (_ i c)\n    (if (>= i c)\n\t\'()\n\t(cons (gl.getActiveAttrib program i) (_ (+ i 1) c))))\n  (_ 0 (dbg (gl.getProgramParameter program gl.ACTIVE_ATTRIBUTES))))\n\n      ;; (let ((attrib-list (get-attrib-info-list gl shader-program)))\n      ;; \t(msg attrib-list)\n      ;; \t(index-for-each\n      ;; \t (lambda (index info)\n      ;; \t   (msg (+ index \" \" info.name))\n      ;; \t   (gl.bindAttribLocation shader-program index info.name))\n      ;; \t attrib-list)\n\n\n      ;; \t(index-for-each\n      ;; \t (lambda (index info)\n      ;; \t   (gl.enableVertexAttribArray index))\n      ;; \t attrib-list))\n\n;; this version is useful, however...\n(define (get-uniform-info-list gl program)\n  (define (_ i c)\n    (if (>= i c)\n\t\'()\n\t(cons (gl.getActiveUniform program i) (_ (+ i 1) c))))\n  (_ 0 (dbg (gl.getProgramParameter program gl.ACTIVE_UNIFORMS))))\n\n(define (build-shader gl attrib-names vert frag)\n  (let ((fragment-shader (compile-shader gl gl.FRAGMENT_SHADER frag))\n\t(vertex-shader (compile-shader gl gl.VERTEX_SHADER vert)))\n    (let ((shader-program (gl.createProgram)))\n      (gl.attachShader shader-program vertex-shader)\n      (gl.attachShader shader-program fragment-shader)\n      \n      (index-for-each\n       (lambda (index attrib-name)\n\t (gl.bindAttribLocation shader-program index attrib-name))\n       attrib-names)\n      \n      (gl.linkProgram shader-program)\n      (when (not (gl.getProgramParameter shader-program gl.LINK_STATUS))\n            (alert (gl.getShaderInfoLog shader)))\n\n      (gl.useProgram shader-program)\n\n;      (index-for-each\n;       (lambda (index attrib-name)\n;\t (if (not (eq? (gl.getAttribLocation shader-program attrib-name) -1))\n;\t     (gl.enableVertexAttribArray index)\n;\t     (msg (+ \"asked for \" attrib-name \" but not in shader (maybe optimised away)\"))))\n ;      attrib-names)\n      \n      ;; expose all the uniform variables  \n      (for-each\n       (lambda (info)\n\t (set! (js \"shader_program[info.name]\") (gl.getUniformLocation shader-program info.name)))\n       (get-uniform-info-list gl shader_program))\n\n      shader-program)))\n\n;; should presumably replace this stuff with uniform buffer objects?\n(define (make-uniform-item name type value) (list name type value))\n(define (uniform-item-name u) (list-ref u 0))\n(define (uniform-item-type u) (list-ref u 1))\n(define (uniform-item-value u) (list-ref u 2))\n\n(define (apply-uniform-items! gl shader ui)\n  (for-each \n   (lambda (u)\n     (internal-uniform! \n      gl \n      shader\n      (uniform-item-name u) \n      (uniform-item-type u)\n      (uniform-item-value u)))\n   ui))\n\n(define (set-uniform-item ui l)\n  (cond\n   ((null? l) (list ui))\n   ((eq? (uniform-item-name (car l)) (uniform-item-name ui))\n    (cons ui (cdr l)))\n   (else\n    (cons (car l) (set-uniform-item ui (cdr l))))))\n\n;; todo: add matrices\n(define (internal-uniform! gl shader name type value)\n  (cond\n   ((number? value)\n    (if (eq? type \"f\")\n\t(gl.uniform1f (js \"shader[name]\") value)\n\t(gl.uniform1i (js \"shader[name]\") value)))\n   (else\n    (cond\n     ((eq? (length value) 1)\n      (if (eq? type \"f\")\n\t  (gl.uniform1fv (js \"shader[name]\") value)\n\t  (gl.uniform1iv (js \"shader[name]\") value)))\n     ((eq? (length value) 2)\n      (if (eq? type \"f\")\n\t  (gl.uniform2fv (js \"shader[name]\") value)\n\t  (gl.uniform2iv (js \"shader[name]\") value)))\n     ((eq? (length value) 3)\n      (if (eq? type \"f\")\n\t  (gl.uniform3fv (js \"shader[name]\") value)\n\t  (gl.uniform3iv (js \"shader[name]\") value)))\n     ((eq? (length value) 4)\n      (if (eq? type \"f\")\n\t  (gl.uniform4fv (js \"shader[name]\") value)\n\t  (gl.uniform4iv (js \"shader[name]\") value)))\n     (else\n      (msg (+ \"internal-shader-set: unhandled type: \" value)))))))\n \n", "shaders/default.vert": "precision highp float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,1); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\n", "shaders/person.vert": "precision highp float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,1); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\n", "textures/map.png": "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", "flx/scm/instanceprim.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (instanceprim polyref)\n  (list polyref))\n\n(define (instanceprim-polyref p) (list-ref p 0))\n\n(define (instanceprim-render p gl view-camera camera-pos state tx)\n  (pdata-render \n   (polyprim-pdata (instanceprim-polyref p))\n   gl view-camera camera-pos state tx))\n", "textures/white.png": "iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FHQ4QIHPVuvAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACW0lEQVR42u3UMQEAAAjDMMC/52EAByQSerSTpICXRgIwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAC4LB6wBfy1zhUaAAAAAElFTkSuQmCC", "flx/scm/polyprim.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (polyprim size type vb)\n  (list size type vb))\n\n(define (polyprim-size p) (list-ref p 0))\n(define (polyprim-type p) (list-ref p 1))\n(define (polyprim-pdata p) (list-ref p 2))\n(define (polyprim-modify-pdata p v) (list-replace p 2 v))\n\n(define (build-polyprim gl pdata)\n  (let ((p (polyprim \n\t    (pdata-size-verts pdata) 0 \n\t    (pdata-build-vbo gl pdata))))\n    (pdata-update-vbo! gl pdata)\n    p))\n\n(define (build-empty-polyprim gl type size-verts)\n  ;; match load obj for the moment with points, \n  ;; normals and texturecoords \n  (build-polyprim \n   gl (make-pdata \n       (list \"p\" \"n\" \"t\" \"c\")\n       size-verts\n       (build-list \n\t(* (* size-verts 4) 3) \n\t(lambda (i) 0)))))\n\n(define (polyprim-update-buffers! gl p)\n  (pdata-update-vbo! gl (polyprim-pdata p)))\n  \n(define (polyprim-render p gl view-camera camera-pos state tx)\n  (pdata-render (polyprim-pdata p) gl view-camera camera-pos state tx))\n\n", "flx/scm/meshcache.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define mesh-cache ())\n(define meshes-load-outstanding 0)\n(define meshes-total-load 0)\n\n(define (get-mesh name)\n  (foldl\n   (lambda (t r)\n     (if (and (not r) (eq? (car t) name))\n         (cadr t) r))\n   #f\n   mesh-cache))\n\n(define (meshes-loaded?)\n  (eq? meshes-load-outstanding 0))\n\n(define (load-mesh-cache name)\n  (let ((type (substring name (- (length name) 3) (length name))))\n    (set! meshes-load-outstanding (+ meshes-load-outstanding 1))\n    (set! meshes-total-load (+ meshes-total-load 1))\n    (cond\n     ((eq? type \"obj\")\n      (load-resource-txt \n       name \n       (lambda (data)\n\t (let ((data (inner-load-obj data)))\n\t   (set! meshes-load-outstanding (- meshes-load-outstanding 1))\n\t   (set! mesh-cache (cons (list name data) mesh-cache))))))\n     (else\n      (load-resource-txt \n       name \n       (lambda (data)\n\t (let ((data (inner-load-ply data)))\n\t   (set! meshes-load-outstanding (- meshes-load-outstanding 1))\n\t   (set! mesh-cache (cons (list name data) mesh-cache)))))))))\n\n(define (mesh-cache-search name)\n  (let ((mesh (assoc name mesh-cache)))\n    (cond \n     (mesh (cadr mesh)) ;; deep copy!?\n     (else (msg (+ \"mesh not loaded into cache in preload: \" name))\n\t   (let ((type (substring name (- (length name) 3) (length name))))\n\t     (if (eq? type \"obj\")\n\t\t (force-load-obj name)\n\t\t (force-load-ply name)))))))\n\t\n", "flx/scm/state.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define FLX_HINT_NONE           0x00000000)\n(define FLX_HINT_SOLID          0x00000001)\n(define FLX_HINT_WIRE           0x00000002)\n(define FLX_HINT_NORMAL         0x00000004)\n(define FLX_HINT_POINTS         0x00000008)\n(define FLX_HINT_AALIAS         0x00000010)\n(define FLX_HINT_BOUND          0x00000020)\n(define FLX_HINT_UNLIT          0x00000040)\n(define FLX_HINT_VERTCOLS       0x00000080)\n(define FLX_HINT_ORIGIN         0x00000100)\n(define FLX_HINT_CAST_SHADOW    0x00000200)\n(define FLX_HINT_IGNORE_DEPTH   0x00000400)\n(define FLX_HINT_DEPTH_SORT     0x00000800)\n(define FLX_HINT_LAZY_PARENT    0x00001000)\n(define FLX_HINT_CULL_FACE      0x00002000)\n(define FLX_HINT_CULL_CCW       0x00004000) ;; was something else\n(define FLX_HINT_SPHERE_MAP     0x00008000)\n(define FLX_HINT_FRUSTUM_CULL   0x00010000)\n(define FLX_HINT_NORMALISE      0x00020000)\n(define FLX_HINT_NOBLEND        0x00040000)\n(define FLX_HINT_NOZWRITE       0x00080000)\n\n(define (state gl)\n  (list\n   (mat4.identity (mat4.create))\n   (shader-cache-search \"main\")\n   (vector 1 1 1)\n   \"\"\n   FLX_HINT_SOLID\n   0\n   #f \n   \'()))\n\n(define (state-tx s) (list-ref s 0))\n(define (state-shader s) (list-ref s 1))\n(define (state-modify-shader s v) (list-replace s 1 v))\n(define (state-colour s) (list-ref s 2))\n(define (state-modify-colour s v) (list-replace s 2 v))\n(define (state-texture s) (list-ref s 3))\n(define (state-modify-texture s v) (list-replace s 3 v))\n(define (state-hints s) (list-ref s 4))\n(define (state-modify-hints s v) (list-replace s 4 v))\n(define (state-parent s) (list-ref s 5))\n(define (state-modify-parent s v) (list-replace s 5 v))\n(define (state-hidden s) (list-ref s 6))\n(define (state-modify-hidden s v) (list-replace s 6 v))\n(define (state-uniform-items s) (list-ref s 7))\n(define (state-modify-uniform-items s v) (list-replace s 7 v))\n\n(define (state-clone s)\n  (list\n   (mat4.create (state-tx s))\n   (state-shader s) ;; todo: shader clone\n   (vector-clone (state-colour s))\n   (state-texture s)\n   (state-hints s)\n   (state-parent s)\n   (state-hidden s)\n   (state-uniform-items s)))\n", "flx/scm/primitive.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (primitive type inner)\n  (list type inner))\n\n(define (primitive-type p) (list-ref p 0))\n(define (primitive-inner p) (list-ref p 1))\n\n(define (primitive-render p gl view-camera camera-pos state tx)\n  ;; dispatch\n  (cond \n   ((eq? (primitive-type p) \'polyprim) \n    (polyprim-render (primitive-inner p) gl view-camera camera-pos state tx))\n   ((eq? (primitive-type p) \'instanceprim) \n    (instanceprim-render (primitive-inner p) gl view-camera camera-pos state tx))\n   ((eq? (primitive-type p) \'locatorprim)\n    ;; locator has no primitive (might want to change this for debugging)\n    0)\n   (else (msg \"unknown primitive\"))))\n", "flx/scm/scenegraph.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2017 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (scenenode id state primitive children) (list id state primitive children (mat4.identity (mat4.create))))\n(define (scenenode-id p) (list-ref p 0))\n(define (scenenode-state p) (list-ref p 1))\n(define (scenenode-modify-state! p v) (set! p (list-replace p 1 v)))\n(define (scenenode-primitive p)  (list-ref p 2))\n(define (scenenode-children p)  (list-ref p 3))\n(define (scenenode-modify-children p v)  (list-replace p 3 v))\n(define (scenenode-global-tx p) (list-ref p 4))\n(define (scenenode-modify-global-tx! p v) (set! p (list-replace p 4 v)))\n;;(define (scenenode-modify-add-child p child) (list-replace p 3 (cons child (scenenode-children p))))\n\n(define (scenenode-print p)\n  (msg (+ (scenenode-id p) \" \" (state-tx (scenenode-state p)))))\n\n;; order children by id\n(define (scenenode-modify-add-child p child)\n  (define (_ l v)\n    (cond\n     ((null? l) (list v))\n     ((< (scenenode-id  v) (scenenode-id (car l))) (cons v l))\n     (else (cons (car l) (_ (cdr l) v)))))\n  (list-replace p 3 (_ (scenenode-children p) child)))\n\n;; binary search\n(define (scenenode-search-child l id)\n  (define (_ start end)\n    (cond\n     ;; no children\n     ((null? l) #f)\n     (else\n      (let ((mid (trunc (+ start (/ (- end start) 2)))))\n\t(cond\n\t ;; not found\n\t ((< (- end start) 2) #f)\n\t ;; found\n\t ((eq? id (car (list-ref l mid))) (list-ref l mid))\n\t ;; search down\n\t ((> (car (list-ref l mid)) id)\n\t  (_ start mid))\n\t ;; search up\n\t (else\n\t  (_ mid end)))))))\n  (_ 0 (length l)))\n\n(define (scenegraph-find sn id)\n  (cond\n   ((eq? (scenenode-id sn) id) sn)\n   (else \n    (let ((result (scenenode-search-child (scenenode-children sn) id)))\n      (if result result\n\t  (foldl\n\t   (lambda (sn r)\n\t     (if r r (scenegraph-find sn id)))\n\t   #f\n\t   (scenenode-children sn)))))))\n\n(define (scenegraph-remove sn id)\n  (scenenode-modify-children\n   sn\n   (filter (lambda (sn)\n\t     (not (eq? (scenenode-id sn) id)))\n\t   (map\n\t    (lambda (sn)\n\t      (scenegraph-remove sn id))\n\t    (scenenode-children sn)))))\n\n (define (scenegraph-add sn parent-id node)\n  (cond\n   ((eq? (scenenode-id sn) parent-id) \n    (scenenode-modify-add-child sn node))\n   (else \n    (scenenode-modify-children\n     sn\n     (map\n      (lambda (sn)\n\t(scenegraph-add sn parent-id node))\n      (scenenode-children sn))))))\n\n(define (scenegraph-render sn gl view-camera camera-pos tx)\n  (when (not (state-hidden (scenenode-state sn)))\n\t(when (not (zero? (scenenode-primitive sn)))\n\t      (let ((hints (state-hints (scenenode-state sn))))\n\t\t;; hints that affect all types of primitive\n\t\t(if (bitwise-and hints FLX_HINT_NOZWRITE)\n\t\t    (gl.depthMask false)\n\t\t    (gl.depthMask true))\n\t\t(if (bitwise-and hints FLX_HINT_CULL_FACE)\n\t\t    (gl.enable gl.CULL_FACE)\n\t\t    (gl.disable gl.CULL_FACE))\n\t\t(if (bitwise-and hints FLX_HINT_CULL_CCW) \n\t\t    (gl.frontFace gl.CW)\n\t\t    (gl.frontFace gl.CCW))\n\t\t(if (bitwise-and hints FLX_HINT_IGNORE_DEPTH) \n\t\t    (gl.disable gl.DEPTH_TEST)\n\t\t    (gl.enable gl.DEPTH_TEST))\n\t\t(primitive-render \n\t\t (scenenode-primitive sn) gl view-camera camera-pos \n\t\t (scenenode-state sn)\n\t\t tx)))\n\t\n\t(let ((child-tx (mat4.create)))\n\t  ;; pass the heirachical transform down\n\t  (mat4.multiply tx (state-tx (scenenode-state sn)) child-tx)    \n\t  ;; child-tx is actually the local transform for this object\n\t  (scenenode-modify-global-tx! sn child-tx)\n\t  (for-each \n\t   (lambda (child)\n\t     (scenegraph-render child gl view-camera camera-pos child-tx))\n\t   (scenenode-children sn)))))\n\n(define (scenegraph-print sn depth)\n  (scenenode-print sn)\n  (for-each \n   (lambda (child)\n     (scenegraph-print child (+ depth 1)))\n   (scenenode-children sn)))\n", "flx/scm/data.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define unit-cube-vertices\n  (list\n   -0.5  0.5 -0.5   0.5  0.5 -0.5  -0.5 -0.5 -0.5\n    0.5 -0.5 -0.5   0.5  0.5 -0.5  -0.5 -0.5 -0.5\n    0.5  0.5 -0.5   0.5  0.5  0.5   0.5 -0.5 -0.5\n    0.5 -0.5  0.5   0.5  0.5  0.5   0.5 -0.5 -0.5\n   -0.5  0.5  0.5   0.5  0.5  0.5  -0.5  0.5 -0.5\n    0.5  0.5 -0.5   0.5  0.5  0.5  -0.5  0.5 -0.5\n    0.5  0.5  0.5  -0.5  0.5  0.5   0.5 -0.5  0.5\n   -0.5 -0.5  0.5  -0.5  0.5  0.5   0.5 -0.5  0.5\n   -0.5  0.5  0.5  -0.5  0.5 -0.5  -0.5 -0.5  0.5\n   -0.5 -0.5 -0.5  -0.5  0.5 -0.5  -0.5 -0.5  0.5\n   -0.5 -0.5 -0.5   0.5 -0.5 -0.5  -0.5 -0.5  0.5\n    0.5 -0.5  0.5   0.5 -0.5 -0.5  -0.5 -0.5  0.5))\n\n(define unit-cube-normals\n  (list\n    0  0 -1   0  0 -1   0  0 -1\n    0  0 -1   0  0 -1   0  0 -1\n    1  0  0   1  0  0   1  0  0\n    1  0  0   1  0  0   1  0  0\n    0  1  0   0  1  0   0  1  0\n    0  1  0   0  1  0   0  1  0\n    0  0  1   0  0  1   0  0  1\n    0  0  1   0  0  1   0  0  1\n   -1  0  0  -1  0  0  -1  0  0\n   -1  0  0  -1  0  0  -1  0  0\n    0 -1  0   0 -1  0   0 -1  0\n    0 -1  0   0 -1  0   0 -1  0))\n\n(define unit-cube-texcoords\n  (list\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0))\n\n\n(define sphere-vertices (js \"[0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.0, 1.0, -0.0, 0.0, 1.0, -0.0, 0.3536, 0.866, 0.3536, 0.5, 0.866, -0.0, 0.0, 1.0, -0.0, 0.5, 0.866, -0.0, 0.0, 1.0, -0.0, 0.0, 1.0, -0.0, 0.5, 0.866, -0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, -0.0, 0.3536, 0.866, -0.3536, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, 0.3536, 0.866, -0.3536, -0.0, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.3536, 0.866, -0.3536, -0.0, 1.0, -0.0, -0.3536, 0.866, -0.3536, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, -0.5, 0.866, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.3536, 0.866, 0.3536, -0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.5, 0.866, 0.3536, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.0, 0.5, 0.866, 0.6124, 0.5, 0.6124, 0.3536, 0.866, 0.3536, 0.6124, 0.5, 0.6124, 0.5, 0.866, -0.0, 0.5, 0.866, -0.0, 0.6124, 0.5, 0.6124, 0.866, 0.5, -0.0, 0.5, 0.866, -0.0, 0.866, 0.5, -0.0, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.866, 0.5, -0.0, 0.6124, 0.5, -0.6124, 0.3536, 0.866, -0.3536, 0.6124, 0.5, -0.6124, -0.0, 0.866, -0.5, -0.0, 0.866, -0.5, 0.6124, 0.5, -0.6124, -0.0, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.3536, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.0, 0.5, -0.866, -0.6124, 0.5, -0.6124, -0.3536, 0.866, -0.3536, -0.6124, 0.5, -0.6124, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.6124, 0.5, -0.6124, -0.866, 0.5, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.0, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.866, 0.5, 0.0, -0.6124, 0.5, 0.6124, -0.3536, 0.866, 0.3536, -0.6124, 0.5, 0.6124, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, -0.6124, 0.5, 0.6124, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, 0.0, -0.0, 1.0, 0.6124, 0.5, 0.6124, 0.6124, 0.5, 0.6124, 0.0, -0.0, 1.0, 0.7071, -0.0, 0.7071, 0.6124, 0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.866, 0.5, -0.0, 0.866, 0.5, -0.0, 0.7071, -0.0, 0.7071, 1.0, -0.0, -0.0, 0.866, 0.5, -0.0, 1.0, -0.0, -0.0, 0.6124, 0.5, -0.6124, 0.6124, 0.5, -0.6124, 1.0, -0.0, -0.0, 0.7071, -0.0, -0.7071, 0.6124, 0.5, -0.6124, 0.7071, -0.0, -0.7071, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, 0.7071, -0.0, -0.7071, -0.0, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.6124, 0.5, -0.6124, -0.6124, 0.5, -0.6124, -0.0, -0.0, -1.0, -0.7071, -0.0, -0.7071, -0.6124, 0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.7071, -0.0, -0.7071, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.0, -0.6124, 0.5, 0.6124, -0.6124, 0.5, 0.6124, -1.0, -0.0, 0.0, -0.7071, -0.0, 0.7071, -0.6124, 0.5, 0.6124, -0.7071, -0.0, 0.7071, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, -0.7071, -0.0, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.7071, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.0, -0.5, 0.866, 0.6124, -0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.6124, -0.5, 0.6124, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.6124, -0.5, 0.6124, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.866, -0.5, -0.0, 0.6124, -0.5, -0.6124, 0.7071, -0.0, -0.7071, 0.6124, -0.5, -0.6124, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.6124, -0.5, -0.6124, -0.0, -0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.5, -0.866, -0.7071, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.0, -0.5, -0.866, -0.6124, -0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.6124, -0.5, -0.6124, -1.0, -0.0, 0.0, -1.0, -0.0, 0.0, -0.6124, -0.5, -0.6124, -0.866, -0.5, 0.0, -1.0, -0.0, 0.0, -0.866, -0.5, 0.0, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.866, -0.5, 0.0, -0.6124, -0.5, 0.6124, -0.7071, -0.0, 0.7071, -0.6124, -0.5, 0.6124, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, -0.6124, -0.5, 0.6124, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.6124, -0.5, 0.6124, 0.6124, -0.5, 0.6124, 0.0, -0.866, 0.5, 0.3536, -0.866, 0.3536, 0.6124, -0.5, 0.6124, 0.3536, -0.866, 0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.3536, -0.866, 0.3536, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.0, 0.6124, -0.5, -0.6124, 0.6124, -0.5, -0.6124, 0.5, -0.866, -0.0, 0.3536, -0.866, -0.3536, 0.6124, -0.5, -0.6124, 0.3536, -0.866, -0.3536, -0.0, -0.5, -0.866, -0.0, -0.5, -0.866, 0.3536, -0.866, -0.3536, -0.0, -0.866, -0.5, -0.0, -0.5, -0.866, -0.0, -0.866, -0.5, -0.6124, -0.5, -0.6124, -0.6124, -0.5, -0.6124, -0.0, -0.866, -0.5, -0.3536, -0.866, -0.3536, -0.6124, -0.5, -0.6124, -0.3536, -0.866, -0.3536, -0.866, -0.5, 0.0, -0.866, -0.5, 0.0, -0.3536, -0.866, -0.3536, -0.5, -0.866, 0.0, -0.866, -0.5, 0.0, -0.5, -0.866, 0.0, -0.6124, -0.5, 0.6124, -0.6124, -0.5, 0.6124, -0.5, -0.866, 0.0, -0.3536, -0.866, 0.3536, -0.6124, -0.5, 0.6124, -0.3536, -0.866, 0.3536, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.866, 0.3536, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.0, 0.5, -0.866, -0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.0, -0.866, -0.5, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, -0.0, -0.5, -0.866, 0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0]\"))\n(define sphere-normals (js \"[0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.5, 0.866, -0.0, 0.0, 1.0, 0.0, 0.5, 0.866, -0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.5, 0.866, -0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.3536, 0.866, -0.3536, -0.0, 0.866, -0.5, 0.0, 1.0, 0.0, -0.0, 0.866, -0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.0, 0.866, -0.5, -0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, -0.5, 0.866, 0.0, 0.0, 1.0, 0.0, -0.5, 0.866, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.5, 0.866, 0.3536, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.0, 0.5, 0.866, 0.6124, 0.5, 0.6124, 0.3536, 0.866, 0.3536, 0.6124, 0.5, 0.6124, 0.5, 0.866, -0.0, 0.5, 0.866, -0.0, 0.6124, 0.5, 0.6124, 0.866, 0.5, -0.0, 0.5, 0.866, -0.0, 0.866, 0.5, -0.0, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.866, 0.5, -0.0, 0.6124, 0.5, -0.6124, 0.3536, 0.866, -0.3536, 0.6124, 0.5, -0.6124, -0.0, 0.866, -0.5, -0.0, 0.866, -0.5, 0.6124, 0.5, -0.6124, -0.0, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.3536, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.0, 0.5, -0.866, -0.6124, 0.5, -0.6124, -0.3536, 0.866, -0.3536, -0.6124, 0.5, -0.6124, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.6124, 0.5, -0.6124, -0.866, 0.5, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.0, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.866, 0.5, 0.0, -0.6124, 0.5, 0.6124, -0.3536, 0.866, 0.3536, -0.6124, 0.5, 0.6124, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, -0.6124, 0.5, 0.6124, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, 0.0, -0.0, 1.0, 0.6124, 0.5, 0.6124, 0.6124, 0.5, 0.6124, 0.0, -0.0, 1.0, 0.7071, -0.0, 0.7071, 0.6124, 0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.866, 0.5, -0.0, 0.866, 0.5, -0.0, 0.7071, -0.0, 0.7071, 1.0, -0.0, -0.0, 0.866, 0.5, -0.0, 1.0, -0.0, -0.0, 0.6124, 0.5, -0.6124, 0.6124, 0.5, -0.6124, 1.0, -0.0, -0.0, 0.7071, -0.0, -0.7071, 0.6124, 0.5, -0.6124, 0.7071, -0.0, -0.7071, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, 0.7071, -0.0, -0.7071, -0.0, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.6124, 0.5, -0.6124, -0.6124, 0.5, -0.6124, -0.0, -0.0, -1.0, -0.7071, -0.0, -0.7071, -0.6124, 0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.7071, -0.0, -0.7071, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.0, -0.6124, 0.5, 0.6124, -0.6124, 0.5, 0.6124, -1.0, -0.0, 0.0, -0.7071, -0.0, 0.7071, -0.6124, 0.5, 0.6124, -0.7071, -0.0, 0.7071, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, -0.7071, -0.0, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.7071, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.0, -0.5, 0.866, 0.6124, -0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.6124, -0.5, 0.6124, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.6124, -0.5, 0.6124, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.866, -0.5, -0.0, 0.6124, -0.5, -0.6124, 0.7071, -0.0, -0.7071, 0.6124, -0.5, -0.6124, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.6124, -0.5, -0.6124, -0.0, -0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.5, -0.866, -0.7071, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.0, -0.5, -0.866, -0.6124, -0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.6124, -0.5, -0.6124, -1.0, -0.0, 0.0, -1.0, -0.0, 0.0, -0.6124, -0.5, -0.6124, -0.866, -0.5, 0.0, -1.0, -0.0, 0.0, -0.866, -0.5, 0.0, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.866, -0.5, 0.0, -0.6124, -0.5, 0.6124, -0.7071, -0.0, 0.7071, -0.6124, -0.5, 0.6124, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, -0.6124, -0.5, 0.6124, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.6124, -0.5, 0.6124, 0.6124, -0.5, 0.6124, 0.0, -0.866, 0.5, 0.3536, -0.866, 0.3536, 0.6124, -0.5, 0.6124, 0.3536, -0.866, 0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.3536, -0.866, 0.3536, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.0, 0.6124, -0.5, -0.6124, 0.6124, -0.5, -0.6124, 0.5, -0.866, -0.0, 0.3536, -0.866, -0.3536, 0.6124, -0.5, -0.6124, 0.3536, -0.866, -0.3536, -0.0, -0.5, -0.866, -0.0, -0.5, -0.866, 0.3536, -0.866, -0.3536, -0.0, -0.866, -0.5, -0.0, -0.5, -0.866, -0.0, -0.866, -0.5, -0.6124, -0.5, -0.6124, -0.6124, -0.5, -0.6124, -0.0, -0.866, -0.5, -0.3536, -0.866, -0.3536, -0.6124, -0.5, -0.6124, -0.3536, -0.866, -0.3536, -0.866, -0.5, 0.0, -0.866, -0.5, 0.0, -0.3536, -0.866, -0.3536, -0.5, -0.866, 0.0, -0.866, -0.5, 0.0, -0.5, -0.866, 0.0, -0.6124, -0.5, 0.6124, -0.6124, -0.5, 0.6124, -0.5, -0.866, 0.0, -0.3536, -0.866, 0.3536, -0.6124, -0.5, 0.6124, -0.3536, -0.866, 0.3536, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.866, 0.3536, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.0, 0.5, -0.866, -0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.0, -0.866, -0.5, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, -0.0, -0.5, -0.866, 0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0 ]\"))\n(define sphere-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.75, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.875, 0.0, 0.0, 0.875, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.0, 0.0, 0.875, 0.1667, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.875, 0.1667, 0.0, 1.0, 0.1667, 0.0, 0.0, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.3333, 0.0, 1.0, 0.1667, 0.0, 1.0, 0.1667, 0.0, 0.875, 0.3333, 0.0, 1.0, 0.3333, 0.0, 0.0, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.875, 0.5, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.5, 0.0, 1.0, 0.3333, 0.0, 1.0, 0.3333, 0.0, 0.875, 0.5, 0.0, 1.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.75, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.875, 0.5, 0.0, 0.875, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.5, 0.0, 0.875, 0.6667, 0.0, 1.0, 0.5, 0.0, 1.0, 0.5, 0.0, 0.875, 0.6667, 0.0, 1.0, 0.6667, 0.0, 0.0, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.875, 0.8333, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.8333, 0.0, 1.0, 0.6667, 0.0, 1.0, 0.6667, 0.0, 0.875, 0.8333, 0.0, 1.0, 0.8333, 0.0, 0.0, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.875, 0.8333, 0.0, 0.875, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.875, 1.0, 0.0, 0.875, 0.8333, 0.0, 0.875, 1.0, 0.0, 1.0, 0.8333, 0.0, 1.0, 0.8333, 0.0, 0.875, 1.0, 0.0, 1.0, 1.0, 0.0]\"))\n(define torus-vertices (js \"[0.7, 0.0, 0.0, 0.495, 0.495, 0.0, 0.4243, 0.4243, 0.1732, 0.7, 0.0, 0.0, 0.4243, 0.4243, 0.1732, 0.6, 0.0, 0.1732, 0.6, 0.0, 0.1732, 0.4243, 0.4243, 0.1732, 0.2828, 0.2828, 0.1732, 0.6, 0.0, 0.1732, 0.2828, 0.2828, 0.1732, 0.4, 0.0, 0.1732, 0.4, 0.0, 0.1732, 0.2828, 0.2828, 0.1732, 0.2121, 0.2121, -0.0, 0.4, 0.0, 0.1732, 0.2121, 0.2121, -0.0, 0.3, 0.0, -0.0, 0.3, 0.0, -0.0, 0.2121, 0.2121, -0.0, 0.2828, 0.2828, -0.1732, 0.3, 0.0, -0.0, 0.2828, 0.2828, -0.1732, 0.4, 0.0, -0.1732, 0.4, 0.0, -0.1732, 0.2828, 0.2828, -0.1732, 0.4243, 0.4243, -0.1732, 0.4, 0.0, -0.1732, 0.4243, 0.4243, -0.1732, 0.6, 0.0, -0.1732, 0.6, 0.0, -0.1732, 0.4243, 0.4243, -0.1732, 0.495, 0.495, 0.0, 0.6, 0.0, -0.1732, 0.495, 0.495, 0.0, 0.7, 0.0, 0.0, 0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.0, 0.6, 0.1732, 0.495, 0.495, 0.0, -0.0, 0.6, 0.1732, 0.4243, 0.4243, 0.1732, 0.4243, 0.4243, 0.1732, -0.0, 0.6, 0.1732, -0.0, 0.4, 0.1732, 0.4243, 0.4243, 0.1732, -0.0, 0.4, 0.1732, 0.2828, 0.2828, 0.1732, 0.2828, 0.2828, 0.1732, -0.0, 0.4, 0.1732, -0.0, 0.3, -0.0, 0.2828, 0.2828, 0.1732, -0.0, 0.3, -0.0, 0.2121, 0.2121, -0.0, 0.2121, 0.2121, -0.0, -0.0, 0.3, -0.0, -0.0, 0.4, -0.1732, 0.2121, 0.2121, -0.0, -0.0, 0.4, -0.1732, 0.2828, 0.2828, -0.1732, 0.2828, 0.2828, -0.1732, -0.0, 0.4, -0.1732, -0.0, 0.6, -0.1732, 0.2828, 0.2828, -0.1732, -0.0, 0.6, -0.1732, 0.4243, 0.4243, -0.1732, 0.4243, 0.4243, -0.1732, -0.0, 0.6, -0.1732, -0.0, 0.7, 0.0, 0.4243, 0.4243, -0.1732, -0.0, 0.7, 0.0, 0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.495, 0.495, 0.0, -0.4243, 0.4243, 0.1732, -0.0, 0.7, 0.0, -0.4243, 0.4243, 0.1732, -0.0, 0.6, 0.1732, -0.0, 0.6, 0.1732, -0.4243, 0.4243, 0.1732, -0.2828, 0.2828, 0.1732, -0.0, 0.6, 0.1732, -0.2828, 0.2828, 0.1732, -0.0, 0.4, 0.1732, -0.0, 0.4, 0.1732, -0.2828, 0.2828, 0.1732, -0.2121, 0.2121, -0.0, -0.0, 0.4, 0.1732, -0.2121, 0.2121, -0.0, -0.0, 0.3, -0.0, -0.0, 0.3, -0.0, -0.2121, 0.2121, -0.0, -0.2828, 0.2828, -0.1732, -0.0, 0.3, -0.0, -0.2828, 0.2828, -0.1732, -0.0, 0.4, -0.1732, -0.0, 0.4, -0.1732, -0.2828, 0.2828, -0.1732, -0.4243, 0.4243, -0.1732, -0.0, 0.4, -0.1732, -0.4243, 0.4243, -0.1732, -0.0, 0.6, -0.1732, -0.0, 0.6, -0.1732, -0.4243, 0.4243, -0.1732, -0.495, 0.495, 0.0, -0.0, 0.6, -0.1732, -0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.495, 0.495, 0.0, -0.7, -0.0, 0.0, -0.6, -0.0, 0.1732, -0.495, 0.495, 0.0, -0.6, -0.0, 0.1732, -0.4243, 0.4243, 0.1732, -0.4243, 0.4243, 0.1732, -0.6, -0.0, 0.1732, -0.4, -0.0, 0.1732, -0.4243, 0.4243, 0.1732, -0.4, -0.0, 0.1732, -0.2828, 0.2828, 0.1732, -0.2828, 0.2828, 0.1732, -0.4, -0.0, 0.1732, -0.3, -0.0, -0.0, -0.2828, 0.2828, 0.1732, -0.3, -0.0, -0.0, -0.2121, 0.2121, -0.0, -0.2121, 0.2121, -0.0, -0.3, -0.0, -0.0, -0.4, -0.0, -0.1732, -0.2121, 0.2121, -0.0, -0.4, -0.0, -0.1732, -0.2828, 0.2828, -0.1732, -0.2828, 0.2828, -0.1732, -0.4, -0.0, -0.1732, -0.6, -0.0, -0.1732, -0.2828, 0.2828, -0.1732, -0.6, -0.0, -0.1732, -0.4243, 0.4243, -0.1732, -0.4243, 0.4243, -0.1732, -0.6, -0.0, -0.1732, -0.7, -0.0, 0.0, -0.4243, 0.4243, -0.1732, -0.7, -0.0, 0.0, -0.495, 0.495, 0.0, -0.7, -0.0, 0.0, -0.495, -0.495, 0.0, -0.4243, -0.4243, 0.1732, -0.7, -0.0, 0.0, -0.4243, -0.4243, 0.1732, -0.6, -0.0, 0.1732, -0.6, -0.0, 0.1732, -0.4243, -0.4243, 0.1732, -0.2828, -0.2828, 0.1732, -0.6, -0.0, 0.1732, -0.2828, -0.2828, 0.1732, -0.4, -0.0, 0.1732, -0.4, -0.0, 0.1732, -0.2828, -0.2828, 0.1732, -0.2121, -0.2121, -0.0, -0.4, -0.0, 0.1732, -0.2121, -0.2121, -0.0, -0.3, -0.0, -0.0, -0.3, -0.0, -0.0, -0.2121, -0.2121, -0.0, -0.2828, -0.2828, -0.1732, -0.3, -0.0, -0.0, -0.2828, -0.2828, -0.1732, -0.4, -0.0, -0.1732, -0.4, -0.0, -0.1732, -0.2828, -0.2828, -0.1732, -0.4243, -0.4243, -0.1732, -0.4, -0.0, -0.1732, -0.4243, -0.4243, -0.1732, -0.6, -0.0, -0.1732, -0.6, -0.0, -0.1732, -0.4243, -0.4243, -0.1732, -0.495, -0.495, 0.0, -0.6, -0.0, -0.1732, -0.495, -0.495, 0.0, -0.7, -0.0, 0.0, -0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.0, -0.6, 0.1732, -0.495, -0.495, 0.0, 0.0, -0.6, 0.1732, -0.4243, -0.4243, 0.1732, -0.4243, -0.4243, 0.1732, 0.0, -0.6, 0.1732, 0.0, -0.4, 0.1732, -0.4243, -0.4243, 0.1732, 0.0, -0.4, 0.1732, -0.2828, -0.2828, 0.1732, -0.2828, -0.2828, 0.1732, 0.0, -0.4, 0.1732, 0.0, -0.3, -0.0, -0.2828, -0.2828, 0.1732, 0.0, -0.3, -0.0, -0.2121, -0.2121, -0.0, -0.2121, -0.2121, -0.0, 0.0, -0.3, -0.0, 0.0, -0.4, -0.1732, -0.2121, -0.2121, -0.0, 0.0, -0.4, -0.1732, -0.2828, -0.2828, -0.1732, -0.2828, -0.2828, -0.1732, 0.0, -0.4, -0.1732, 0.0, -0.6, -0.1732, -0.2828, -0.2828, -0.1732, 0.0, -0.6, -0.1732, -0.4243, -0.4243, -0.1732, -0.4243, -0.4243, -0.1732, 0.0, -0.6, -0.1732, 0.0, -0.7, 0.0, -0.4243, -0.4243, -0.1732, 0.0, -0.7, 0.0, -0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.495, -0.495, 0.0, 0.4243, -0.4243, 0.1732, 0.0, -0.7, 0.0, 0.4243, -0.4243, 0.1732, 0.0, -0.6, 0.1732, 0.0, -0.6, 0.1732, 0.4243, -0.4243, 0.1732, 0.2828, -0.2828, 0.1732, 0.0, -0.6, 0.1732, 0.2828, -0.2828, 0.1732, 0.0, -0.4, 0.1732, 0.0, -0.4, 0.1732, 0.2828, -0.2828, 0.1732, 0.2121, -0.2121, -0.0, 0.0, -0.4, 0.1732, 0.2121, -0.2121, -0.0, 0.0, -0.3, -0.0, 0.0, -0.3, -0.0, 0.2121, -0.2121, -0.0, 0.2828, -0.2828, -0.1732, 0.0, -0.3, -0.0, 0.2828, -0.2828, -0.1732, 0.0, -0.4, -0.1732, 0.0, -0.4, -0.1732, 0.2828, -0.2828, -0.1732, 0.4243, -0.4243, -0.1732, 0.0, -0.4, -0.1732, 0.4243, -0.4243, -0.1732, 0.0, -0.6, -0.1732, 0.0, -0.6, -0.1732, 0.4243, -0.4243, -0.1732, 0.495, -0.495, 0.0, 0.0, -0.6, -0.1732, 0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.495, -0.495, 0.0, 0.7, 0.0, 0.0, 0.6, 0.0, 0.1732, 0.495, -0.495, 0.0, 0.6, 0.0, 0.1732, 0.4243, -0.4243, 0.1732, 0.4243, -0.4243, 0.1732, 0.6, 0.0, 0.1732, 0.4, 0.0, 0.1732, 0.4243, -0.4243, 0.1732, 0.4, 0.0, 0.1732, 0.2828, -0.2828, 0.1732, 0.2828, -0.2828, 0.1732, 0.4, 0.0, 0.1732, 0.3, 0.0, -0.0, 0.2828, -0.2828, 0.1732, 0.3, 0.0, -0.0, 0.2121, -0.2121, -0.0, 0.2121, -0.2121, -0.0, 0.3, 0.0, -0.0, 0.4, 0.0, -0.1732, 0.2121, -0.2121, -0.0, 0.4, 0.0, -0.1732, 0.2828, -0.2828, -0.1732, 0.2828, -0.2828, -0.1732, 0.4, 0.0, -0.1732, 0.6, 0.0, -0.1732, 0.2828, -0.2828, -0.1732, 0.6, 0.0, -0.1732, 0.4243, -0.4243, -0.1732, 0.4243, -0.4243, -0.1732, 0.6, 0.0, -0.1732, 0.7, 0.0, 0.0, 0.4243, -0.4243, -0.1732, 0.7, 0.0, 0.0, 0.495, -0.495, 0.0]\"))\n(define torus-normals (js \"[1.0, 0.0, 0.0, 0.7071, 0.7071, 0.0, 0.3536, 0.3536, 0.866, 1.0, 0.0, 0.0, 0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.866, 0.3536, 0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, -0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.866, -0.3536, -0.3536, 0.866, -0.7071, -0.7071, -0.0, -0.5, -0.0, 0.866, -0.7071, -0.7071, -0.0, -1.0, -0.0, -0.0, -1.0, -0.0, -0.0, -0.7071, -0.7071, -0.0, -0.3536, -0.3536, -0.866, -1.0, -0.0, -0.0, -0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -0.866, -0.3536, -0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, 0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.866, 0.3536, 0.3536, -0.866, 0.7071, 0.7071, 0.0, 0.5, 0.0, -0.866, 0.7071, 0.7071, 0.0, 1.0, 0.0, 0.0, 0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 0.5, 0.866, 0.7071, 0.7071, 0.0, -0.0, 0.5, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, 0.3536, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -1.0, -0.0, -0.3536, -0.3536, 0.866, 0.0, -1.0, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.7071, -0.0, 0.0, -1.0, -0.0, 0.0, -0.5, -0.866, -0.7071, -0.7071, -0.0, 0.0, -0.5, -0.866, -0.3536, -0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, -0.3536, -0.866, -0.0, 0.5, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 1.0, 0.0, 0.3536, 0.3536, -0.866, -0.0, 1.0, 0.0, 0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.7071, 0.7071, 0.0, -0.3536, 0.3536, 0.866, -0.0, 1.0, 0.0, -0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, 0.3536, 0.866, 0.3536, -0.3536, 0.866, -0.0, 0.5, 0.866, 0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, -0.3536, 0.866, 0.7071, -0.7071, -0.0, 0.0, -0.5, 0.866, 0.7071, -0.7071, -0.0, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, 0.7071, -0.7071, -0.0, 0.3536, -0.3536, -0.866, 0.0, -1.0, -0.0, 0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, -0.3536, -0.866, -0.3536, 0.3536, -0.866, 0.0, -0.5, -0.866, -0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, 0.3536, -0.866, -0.7071, 0.7071, 0.0, -0.0, 0.5, -0.866, -0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.7071, 0.7071, 0.0, -1.0, -0.0, 0.0, -0.5, -0.0, 0.866, -0.7071, 0.7071, 0.0, -0.5, -0.0, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, 0.5, 0.0, 0.866, -0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, 1.0, 0.0, -0.0, 0.3536, -0.3536, 0.866, 1.0, 0.0, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 1.0, 0.0, -0.0, 0.5, 0.0, -0.866, 0.7071, -0.7071, -0.0, 0.5, 0.0, -0.866, 0.3536, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, -0.5, -0.0, -0.866, 0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.3536, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, -1.0, -0.0, 0.0, -0.3536, 0.3536, -0.866, -1.0, -0.0, 0.0, -0.7071, 0.7071, 0.0, -1.0, -0.0, 0.0, -0.7071, -0.7071, 0.0, -0.3536, -0.3536, 0.866, -1.0, -0.0, 0.0, -0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.866, -0.3536, -0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, 0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.866, 0.3536, 0.3536, 0.866, 0.7071, 0.7071, -0.0, 0.5, 0.0, 0.866, 0.7071, 0.7071, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.0, 0.7071, 0.7071, -0.0, 0.3536, 0.3536, -0.866, 1.0, 0.0, -0.0, 0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.866, 0.3536, 0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, -0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -0.866, -0.3536, -0.3536, -0.866, -0.7071, -0.7071, 0.0, -0.5, -0.0, -0.866, -0.7071, -0.7071, 0.0, -1.0, -0.0, 0.0, -0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.0, -0.5, 0.866, -0.7071, -0.7071, 0.0, 0.0, -0.5, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, -0.3536, 0.866, -0.0, 0.5, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 1.0, -0.0, 0.3536, 0.3536, 0.866, -0.0, 1.0, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.7071, -0.0, -0.0, 1.0, -0.0, -0.0, 0.5, -0.866, 0.7071, 0.7071, -0.0, -0.0, 0.5, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, 0.3536, -0.866, 0.0, -0.5, -0.866, -0.3536, -0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -1.0, 0.0, -0.3536, -0.3536, -0.866, 0.0, -1.0, 0.0, -0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.7071, -0.7071, 0.0, 0.3536, -0.3536, 0.866, 0.0, -1.0, 0.0, 0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, -0.3536, 0.866, -0.3536, 0.3536, 0.866, 0.0, -0.5, 0.866, -0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, 0.3536, 0.866, -0.7071, 0.7071, -0.0, -0.0, 0.5, 0.866, -0.7071, 0.7071, -0.0, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, -0.7071, 0.7071, -0.0, -0.3536, 0.3536, -0.866, -0.0, 1.0, -0.0, -0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, 0.3536, -0.866, 0.3536, -0.3536, -0.866, -0.0, 0.5, -0.866, 0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, -0.3536, -0.866, 0.7071, -0.7071, 0.0, 0.0, -0.5, -0.866, 0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.7071, -0.7071, 0.0, 1.0, 0.0, 0.0, 0.5, 0.0, 0.866, 0.7071, -0.7071, 0.0, 0.5, 0.0, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, -0.5, -0.0, 0.866, 0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, -1.0, -0.0, -0.0, -0.3536, 0.3536, 0.866, -1.0, -0.0, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -1.0, -0.0, -0.0, -0.5, -0.0, -0.866, -0.7071, 0.7071, -0.0, -0.5, -0.0, -0.866, -0.3536, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, 0.5, 0.0, -0.866, -0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.3536, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, 1.0, 0.0, 0.0, 0.3536, -0.3536, -0.866, 1.0, 0.0, 0.0, 0.7071, -0.7071, 0.0]\"))\n(define torus-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.0, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.5, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.0, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 1.0, 0.0, 0.0, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.0, 1.1667, 0.0, 0.125, 1.1667, 0.0, 0.0, 1.0, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.0, 0.0, 0.125, 1.0, 0.0, 0.125, 1.1667, 0.0, 0.25, 1.1667, 0.0, 0.125, 1.0, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.0, 0.0, 0.25, 1.0, 0.0, 0.25, 1.1667, 0.0, 0.375, 1.1667, 0.0, 0.25, 1.0, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.0, 0.0, 0.375, 1.0, 0.0, 0.375, 1.1667, 0.0, 0.5, 1.1667, 0.0, 0.375, 1.0, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.0, 0.0, 0.5, 1.0, 0.0, 0.5, 1.1667, 0.0, 0.625, 1.1667, 0.0, 0.5, 1.0, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.0, 0.0, 0.625, 1.0, 0.0, 0.625, 1.1667, 0.0, 0.75, 1.1667, 0.0, 0.625, 1.0, 0.0, 0.75, 1.1667, 0.0, 0.75, 1.0, 0.0, 0.0, 1.1667, 0.0, 0.0, 1.3333, 0.0, 0.125, 1.3333, 0.0, 0.0, 1.1667, 0.0, 0.125, 1.3333, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.3333, 0.0, 0.25, 1.3333, 0.0, 0.125, 1.1667, 0.0, 0.25, 1.3333, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.3333, 0.0, 0.375, 1.3333, 0.0, 0.25, 1.1667, 0.0, 0.375, 1.3333, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.3333, 0.0, 0.5, 1.3333, 0.0, 0.375, 1.1667, 0.0, 0.5, 1.3333, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.3333, 0.0, 0.625, 1.3333, 0.0, 0.5, 1.1667, 0.0, 0.625, 1.3333, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.3333, 0.0, 0.75, 1.3333, 0.0, 0.625, 1.1667, 0.0, 0.75, 1.3333, 0.0, 0.75, 1.1667, 0.0]\"))\n\n(define wing-vertices (js \"[0.2454, -0.0, 0.7892, 0.9568, -0.0, 0.7842, 0.536, -0.0, 0.9044, 0.2454, -0.0, 0.7892, 1.1471, -0.0, 0.5287, 0.9568, -0.0, 0.7842, 0.2454, -0.0, 0.7892, 0.01, -0.0, 0.4686, 1.1471, -0.0, 0.5287, 0.01, -0.0, 0.4686, 1.2573, -0.0, 0.2883, 1.1471, -0.0, 0.5287, 0.01, -0.0, 0.4686, -0.0, -0.0, 0.2131, 1.2573, -0.0, 0.2883, -0.0, -0.0, 0.2131, 1.1872, -0.0, 0.168, 1.2573, -0.0, 0.2883, -0.0, -0.0, 0.2131, -0.0251, -0.0, 0.1029, 1.1872, -0.0, 0.168, -0.0251, -0.0, 0.1029, 0.2605, -0.0, -0.2377, 1.1872, -0.0, 0.168, 0.2605, -0.0, -0.2377, 1.3926, -0.0, 0.0628, 1.1872, -0.0, 0.168, 0.2605, -0.0, -0.2377, 0.8466, -0.0, -0.6886, 1.3926, -0.0, 0.0628, 0.8466, -0.0, -0.6886, 1.6781, -0.0, -0.3229, 1.3926, -0.0, 0.0628, 0.8466, -0.0, -0.6886, 1.2573, -0.0, -0.8589, 1.6781, -0.0, -0.3229, 1.2573, -0.0, -0.8589, 1.7533, -0.0, -0.6485, 1.6781, -0.0, -0.3229, 1.2573, -0.0, -0.8589, 1.628, -0.0, -0.8639, 1.7533, -0.0, -0.6485, ]\"))\n(define wing-normals (js \"[0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, ]\"))\n(define wing-texcoords (js \"[0.8073, 0.1097, 0.0, 0.4862, 0.0992, 0.0, 0.6752, 0.0493, 0.0, 0.8073, 0.1097, 0.0, 0.4021, 0.218, 0.0, 0.4862, 0.0992, 0.0, 0.8073, 0.1097, 0.0, 0.9373, 0.2673, 0.0, 0.4021, 0.218, 0.0, 0.9373, 0.2673, 0.0, 0.3375, 0.3569, 0.0, 0.4021, 0.218, 0.0, 0.9373, 0.2673, 0.0, 0.9452, 0.3788, 0.0, 0.3375, 0.3569, 0.0, 0.9452, 0.3788, 0.0, 0.3636, 0.4094, 0.0, 0.3375, 0.3569, 0.0, 0.9452, 0.3788, 0.0, 0.9545, 0.4621, 0.0, 0.3636, 0.4094, 0.0, 0.9545, 0.4621, 0.0, 0.8035, 0.6238, 0.0, 0.3636, 0.4094, 0.0, 0.8035, 0.6238, 0.0, 0.3027, 0.4468, 0.0, 0.3636, 0.4094, 0.0, 0.8035, 0.6238, 0.0, 0.5339, 0.8287, 0.0, 0.3027, 0.4468, 0.0, 0.5339, 0.8287, 0.0, 0.1433, 0.6399, 0.0, 0.3027, 0.4468, 0.0, 0.5339, 0.8287, 0.0, 0.3303, 0.9123, 0.0, 0.1433, 0.6399, 0.0, 0.3303, 0.9123, 0.0, 0.0996, 0.8069, 0.0, 0.1433, 0.6399, 0.0, 0.3303, 0.9123, 0.0, 0.1544, 0.9162, 0.0, 0.0996, 0.8069, 0.0, ]\"))\n\n(define body-vertices  (js \"[-0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0061, 0.0211, -0.4399, -0.015, 0.0, -0.4394, -0.0, 0.0, -0.921, 0.0061, 0.0211, -0.4399, 0.0061, -0.0211, -0.4399, -0.0, 0.0, -0.921, -0.015, 0.0, -0.4394, 0.0061, -0.0211, -0.4399, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, -0.0, 0.0, -0.921, 0.0061, -0.0211, -0.4399, 0.0272, 0.0, -0.4404, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, 0.0061, 0.0211, -0.4399, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, -0.0065, 0.0, -0.0029, 0.0061, 0.0211, -0.4399, 0.0194, 0.0259, -0.0037, -0.0065, 0.0, -0.0029, -0.015, 0.0, -0.4394, 0.0061, 0.0211, -0.4399, 0.0061, -0.0211, -0.4399, -0.015, 0.0, -0.4394, -0.0065, 0.0, -0.0029, 0.0194, -0.0259, -0.0037, 0.0061, -0.0211, -0.4399, -0.0065, 0.0, -0.0029, 0.0272, 0.0, -0.4404, 0.0061, -0.0211, -0.4399, 0.0194, -0.0259, -0.0037, 0.0453, 0.0, -0.0046, 0.0272, 0.0, -0.4404, 0.0194, -0.0259, -0.0037, 0.0194, 0.0259, -0.0037, 0.0272, 0.0, -0.4404, 0.0453, 0.0, -0.0046, 0.0194, 0.0259, -0.0037, 0.0061, 0.0211, -0.4399, 0.0272, 0.0, -0.4404, 0.0064, -0.0, 0.3776, 0.0194, 0.0259, -0.0037, 0.0328, 0.0264, 0.3769, 0.0064, -0.0, 0.3776, -0.0065, 0.0, -0.0029, 0.0194, 0.0259, -0.0037, 0.0194, -0.0259, -0.0037, -0.0065, 0.0, -0.0029, 0.0064, -0.0, 0.3776, 0.0328, -0.0264, 0.3769, 0.0194, -0.0259, -0.0037, 0.0064, -0.0, 0.3776, 0.0453, 0.0, -0.0046, 0.0194, -0.0259, -0.0037, 0.0328, -0.0264, 0.3769, 0.0592, -0.0, 0.3761, 0.0453, 0.0, -0.0046, 0.0328, -0.0264, 0.3769, 0.0328, 0.0264, 0.3769, 0.0453, 0.0, -0.0046, 0.0592, -0.0, 0.3761, 0.0328, 0.0264, 0.3769, 0.0194, 0.0259, -0.0037, 0.0453, 0.0, -0.0046, 0.0125, -0.0, 0.691, 0.0328, 0.0264, 0.3769, 0.0389, 0.0263, 0.6913, 0.0125, -0.0, 0.691, 0.0064, -0.0, 0.3776, 0.0328, 0.0264, 0.3769, 0.0328, -0.0264, 0.3769, 0.0064, -0.0, 0.3776, 0.0125, -0.0, 0.691, 0.0389, -0.0263, 0.6913, 0.0328, -0.0264, 0.3769, 0.0125, -0.0, 0.691, 0.0592, -0.0, 0.3761, 0.0328, -0.0264, 0.3769, 0.0389, -0.0263, 0.6913, 0.0652, -0.0, 0.6915, 0.0592, -0.0, 0.3761, 0.0389, -0.0263, 0.6913, 0.0389, 0.0263, 0.6913, 0.0592, -0.0, 0.3761, 0.0652, -0.0, 0.6915, 0.0389, 0.0263, 0.6913, 0.0328, 0.0264, 0.3769, 0.0592, -0.0, 0.3761, -0.0296, -0.0, 0.9218, 0.0389, 0.0263, 0.6913, 0.0304, 0.0601, 0.9289, -0.0296, -0.0, 0.9218, 0.0125, -0.0, 0.691, 0.0389, 0.0263, 0.6913, 0.0389, -0.0263, 0.6913, 0.0125, -0.0, 0.691, -0.0296, -0.0, 0.9218, 0.0304, -0.0601, 0.9289, 0.0389, -0.0263, 0.6913, -0.0296, -0.0, 0.9218, 0.0652, -0.0, 0.6915, 0.0389, -0.0263, 0.6913, 0.0304, -0.0601, 0.9289, 0.0903, -0.0, 0.9359, 0.0652, -0.0, 0.6915, 0.0304, -0.0601, 0.9289, 0.0304, 0.0601, 0.9289, 0.0652, -0.0, 0.6915, 0.0903, -0.0, 0.9359, 0.0304, 0.0601, 0.9289, 0.0389, 0.0263, 0.6913, 0.0652, -0.0, 0.6915, -0.0296, -0.0, 0.9218, 0.0304, 0.0601, 0.9289, 0.0, -0.002, 1.079, 0.002, -0.0, 1.0793, -0.0296, -0.0, 0.9218, 0.0, -0.002, 1.079, 0.0, 0.002, 1.079, -0.0296, -0.0, 0.9218, 0.002, -0.0, 1.0793, 0.0, 0.002, 1.079, 0.0304, -0.0601, 0.9289, -0.0296, -0.0, 0.9218, 0.0304, -0.0601, 0.9289, -0.002, -0.0, 1.0788, 0.0903, -0.0, 0.9359, 0.0304, -0.0601, 0.9289, 0.0, 0.002, 1.079, -0.002, -0.0, 1.0788, 0.0304, 0.0601, 0.9289, 0.0903, -0.0, 0.9359, -0.002, -0.0, 1.0788, 0.0, -0.002, 1.079, 0.0304, 0.0601, 0.9289, -0.002, -0.0, 1.0788, 0.3868, -0.2394, 1.1734, 0.0643, -0.0224, 0.9367, 0.3926, -0.2359, 1.1688, 0.3868, -0.2394, 1.1734, 0.0587, -0.026, 0.9413, 0.0643, -0.0224, 0.9367, 0.3862, -0.2454, 1.1679, 0.0587, -0.026, 0.9413, 0.3868, -0.2394, 1.1734, 0.3862, -0.2454, 1.1679, 0.058, -0.0318, 0.9358, 0.0587, -0.026, 0.9413, 0.0635, -0.0282, 0.9313, 0.058, -0.0318, 0.9358, 0.3862, -0.2454, 1.1679, 0.392, -0.2419, 1.1634, 0.0635, -0.0282, 0.9313, 0.3862, -0.2454, 1.1679, 0.0643, -0.0224, 0.9367, 0.0635, -0.0282, 0.9313, 0.392, -0.2419, 1.1634, 0.3926, -0.2359, 1.1688, 0.0643, -0.0224, 0.9367, 0.392, -0.2419, 1.1634, 0.3976, -0.2518, 1.2178, 0.3926, -0.2359, 1.1688, 0.4354, -0.2324, 1.1921, 0.3976, -0.2518, 1.2178, 0.3868, -0.2394, 1.1734, 0.3926, -0.2359, 1.1688, 0.3862, -0.2454, 1.1679, 0.3868, -0.2394, 1.1734, 0.3976, -0.2518, 1.2178, 0.3965, -0.2905, 1.1866, 0.3862, -0.2454, 1.1679, 0.3976, -0.2518, 1.2178, 0.392, -0.2419, 1.1634, 0.3862, -0.2454, 1.1679, 0.3965, -0.2905, 1.1866, 0.4343, -0.271, 1.1609, 0.392, -0.2419, 1.1634, 0.3965, -0.2905, 1.1866, 0.4354, -0.2324, 1.1921, 0.392, -0.2419, 1.1634, 0.4343, -0.271, 1.1609, 0.4354, -0.2324, 1.1921, 0.3926, -0.2359, 1.1688, 0.392, -0.2419, 1.1634, 0.3976, -0.2518, 1.2178, 0.4354, -0.2324, 1.1921, 0.4449, -0.2829, 1.2166, 0.4453, -0.2827, 1.2163, 0.3976, -0.2518, 1.2178, 0.4449, -0.2829, 1.2166, 0.4454, -0.2822, 1.2167, 0.3976, -0.2518, 1.2178, 0.4453, -0.2827, 1.2163, 0.4454, -0.2822, 1.2167, 0.3965, -0.2905, 1.1866, 0.3976, -0.2518, 1.2178, 0.3965, -0.2905, 1.1866, 0.4449, -0.2824, 1.217, 0.4343, -0.271, 1.1609, 0.3965, -0.2905, 1.1866, 0.4454, -0.2822, 1.2167, 0.4449, -0.2824, 1.217, 0.4354, -0.2324, 1.1921, 0.4343, -0.271, 1.1609, 0.4449, -0.2824, 1.217, 0.4449, -0.2829, 1.2166, 0.4354, -0.2324, 1.1921, 0.4449, -0.2824, 1.217, 0.2788, 0.3996, 1.0633, 0.0473, 0.0266, 0.943, 0.2812, 0.3959, 1.0701, 0.2788, 0.3996, 1.0633, 0.0451, 0.0304, 0.9363, 0.0473, 0.0266, 0.943, 0.2721, 0.4021, 1.067, 0.0451, 0.0304, 0.9363, 0.2788, 0.3996, 1.0633, 0.2721, 0.4021, 1.067, 0.0383, 0.0327, 0.9399, 0.0451, 0.0304, 0.9363, 0.0406, 0.029, 0.9466, 0.0383, 0.0327, 0.9399, 0.2721, 0.4021, 1.067, 0.2745, 0.3985, 1.0738, 0.0406, 0.029, 0.9466, 0.2721, 0.4021, 1.067, 0.0473, 0.0266, 0.943, 0.0406, 0.029, 0.9466, 0.2745, 0.3985, 1.0738, 0.2812, 0.3959, 1.0701, 0.0473, 0.0266, 0.943, 0.2745, 0.3985, 1.0738, 0.3067, 0.433, 1.0446, 0.2812, 0.3959, 1.0701, 0.3232, 0.4141, 1.0874, 0.3067, 0.433, 1.0446, 0.2788, 0.3996, 1.0633, 0.2812, 0.3959, 1.0701, 0.2721, 0.4021, 1.067, 0.2788, 0.3996, 1.0633, 0.3067, 0.433, 1.0446, 0.2671, 0.4517, 1.0682, 0.2721, 0.4021, 1.067, 0.3067, 0.433, 1.0446, 0.2745, 0.3985, 1.0738, 0.2721, 0.4021, 1.067, 0.2671, 0.4517, 1.0682, 0.2837, 0.4327, 1.1111, 0.2745, 0.3985, 1.0738, 0.2671, 0.4517, 1.0682, 0.3232, 0.4141, 1.0874, 0.2745, 0.3985, 1.0738, 0.2837, 0.4327, 1.1111, 0.3232, 0.4141, 1.0874, 0.2812, 0.3959, 1.0701, 0.2745, 0.3985, 1.0738, 0.3067, 0.433, 1.0446, 0.3232, 0.4141, 1.0874, 0.3186, 0.4708, 1.085, 0.3188, 0.4706, 1.0856, 0.3067, 0.433, 1.0446, 0.3186, 0.4708, 1.085, 0.3193, 0.4704, 1.0853, 0.3067, 0.433, 1.0446, 0.3188, 0.4706, 1.0856, 0.3193, 0.4704, 1.0853, 0.2671, 0.4517, 1.0682, 0.3067, 0.433, 1.0446, 0.2671, 0.4517, 1.0682, 0.3191, 0.4706, 1.0847, 0.2837, 0.4327, 1.1111, 0.2671, 0.4517, 1.0682, 0.3193, 0.4704, 1.0853, 0.3191, 0.4706, 1.0847, 0.3232, 0.4141, 1.0874, 0.2837, 0.4327, 1.1111, 0.3191, 0.4706, 1.0847, 0.3186, 0.4708, 1.085, 0.3232, 0.4141, 1.0874, 0.3191, 0.4706, 1.0847, ]\"))\n(define body-normals (js \"[-0.9995, 0.0055, -0.0312, 0.7062, 0.7069, -0.0399, -0.0159, 0.9998, -0.0115, -1.0, 0.0, -0.0058, -0.9995, 0.0055, -0.0312, -0.0159, 0.9998, -0.0115, -0.0106, -0.9999, -0.0114, -0.9995, 0.0055, -0.0312, -1.0, 0.0, -0.0058, -0.0106, -0.9999, -0.0114, 0.7062, -0.7069, -0.0399, -0.9995, 0.0055, -0.0312, 0.9991, 0.0054, -0.0418, 0.7062, -0.7069, -0.0399, -0.0106, -0.9999, -0.0114, 0.9991, 0.0054, -0.0418, 0.0, 0.0, 0.0, 0.7062, -0.7069, -0.0399, 0.7062, 0.7069, -0.0399, 0.0, 0.0, 0.0, 0.9991, 0.0054, -0.0418, -0.0159, 0.9998, -0.0115, 0.7062, 0.7069, -0.0399, 0.9991, 0.0054, -0.0418, -0.9996, 0.0, 0.0266, -0.0159, 0.9998, -0.0115, -0.0021, 1.0, -0.0061, -0.9996, 0.0, 0.0266, -1.0, 0.0, -0.0058, -0.0159, 0.9998, -0.0115, -0.0106, -0.9999, -0.0114, -1.0, 0.0, -0.0058, -0.9996, 0.0, 0.0266, -0.0021, -1.0, -0.0061, -0.0106, -0.9999, -0.0114, -0.9996, 0.0, 0.0266, 0.9991, 0.0054, -0.0418, -0.0106, -0.9999, -0.0114, -0.0021, -1.0, -0.0061, 0.9992, 0.0, -0.039, 0.9991, 0.0054, -0.0418, -0.0021, -1.0, -0.0061, -0.0021, 1.0, -0.0061, 0.9991, 0.0054, -0.0418, 0.9992, 0.0, -0.039, -0.0021, 1.0, -0.0061, -0.0159, 0.9998, -0.0115, 0.9991, 0.0054, -0.0418, -0.9996, 0.0, 0.0267, -0.0021, 1.0, -0.0061, 0.0007, 1.0, -0.0005, -0.9996, 0.0, 0.0267, -0.9996, 0.0, 0.0266, -0.0021, 1.0, -0.0061, -0.0021, -1.0, -0.0061, -0.9996, 0.0, 0.0266, -0.9996, 0.0, 0.0267, 0.0007, -1.0, -0.0005, -0.0021, -1.0, -0.0061, -0.9996, 0.0, 0.0267, 0.9992, 0.0, -0.039, -0.0021, -1.0, -0.0061, 0.0007, -1.0, -0.0005, 0.9996, 0.0, -0.0277, 0.9992, 0.0, -0.039, 0.0007, -1.0, -0.0005, 0.0007, 1.0, -0.0005, 0.9992, 0.0, -0.039, 0.9996, 0.0, -0.0277, 0.0007, 1.0, -0.0005, -0.0021, 1.0, -0.0061, 0.9992, 0.0, -0.039, -0.9968, 0.0, -0.0803, 0.0007, 1.0, -0.0005, -0.0229, 0.9972, -0.0708, -0.9968, 0.0, -0.0803, -0.9996, 0.0, 0.0267, 0.0007, 1.0, -0.0005, 0.0007, -1.0, -0.0005, -0.9996, 0.0, 0.0267, -0.9968, 0.0, -0.0803, -0.0229, -0.9972, -0.0708, 0.0007, -1.0, -0.0005, -0.9968, 0.0, -0.0803, 0.9996, 0.0, -0.0277, 0.0007, -1.0, -0.0005, -0.0229, -0.9972, -0.0708, 0.9981, 0.0, -0.0608, 0.9996, 0.0, -0.0277, -0.0229, -0.9972, -0.0708, -0.0229, 0.9972, -0.0708, 0.9996, 0.0, -0.0277, 0.9981, 0.0, -0.0608, -0.0229, 0.9972, -0.0708, 0.0007, 1.0, -0.0005, 0.9996, 0.0, -0.0277, -0.6951, 0.0, -0.7189, -0.0229, 0.9972, -0.0708, -0.4938, 0.8565, -0.1502, -0.6951, 0.0, -0.7189, -0.9968, 0.0, -0.0803, -0.0229, 0.9972, -0.0708, -0.0229, -0.9972, -0.0708, -0.9968, 0.0, -0.0803, -0.6951, 0.0, -0.7189, -0.4938, -0.8565, -0.1502, -0.0229, -0.9972, -0.0708, -0.6951, 0.0, -0.7189, 0.9981, 0.0, -0.0608, -0.0229, -0.9972, -0.0708, -0.4938, -0.8565, -0.1502, 0.9724, 0.0, 0.2331, 0.9981, 0.0, -0.0608, -0.4938, -0.8565, -0.1502, -0.4938, 0.8565, -0.1502, 0.9981, 0.0, -0.0608, 0.9724, 0.0, 0.2331, -0.4938, 0.8565, -0.1502, -0.0229, 0.9972, -0.0708, 0.9981, 0.0, -0.0608, -0.6951, 0.0, -0.7189, -0.4938, 0.8565, -0.1502, -0.9805, 0.0048, -0.1962, 0.9804, 0.0, -0.1967, -0.6951, 0.0, -0.7189, -0.9805, 0.0048, -0.1962, -0.9805, -0.0048, -0.1962, -0.6951, 0.0, -0.7189, 0.9804, 0.0, -0.1967, -0.9805, -0.0048, -0.1962, -0.4938, -0.8565, -0.1502, -0.6951, 0.0, -0.7189, -0.4938, -0.8565, -0.1502, 0.8398, 0.0, 0.5428, 0.9724, 0.0, 0.2331, -0.4938, -0.8565, -0.1502, -0.9805, -0.0048, -0.1962, 0.8398, 0.0, 0.5428, -0.4938, 0.8565, -0.1502, 0.9724, 0.0, 0.2331, 0.8398, 0.0, 0.5428, -0.9805, 0.0048, -0.1962, -0.4938, 0.8565, -0.1502, 0.8398, 0.0, 0.5428, -0.6778, 0.3701, 0.6353, 0.5177, 0.8538, 0.053, 0.2823, 0.9559, -0.0806, -0.6778, 0.3701, 0.6353, -0.4603, 0.2258, 0.8585, 0.5177, 0.8538, 0.053, -0.7445, -0.6327, -0.2128, -0.4603, 0.2258, 0.8585, -0.6778, 0.3701, 0.6353, -0.7445, -0.6327, -0.2128, -0.518, -0.8537, -0.0531, -0.4603, 0.2258, 0.8585, 0.4591, -0.2274, -0.8588, -0.518, -0.8537, -0.0531, -0.7445, -0.6327, -0.2128, 0.2234, -0.0834, -0.9711, 0.4591, -0.2274, -0.8588, -0.7445, -0.6327, -0.2128, 0.5177, 0.8538, 0.053, 0.4591, -0.2274, -0.8588, 0.2234, -0.0834, -0.9711, 0.2823, 0.9559, -0.0806, 0.5177, 0.8538, 0.053, 0.2234, -0.0834, -0.9711, -0.8321, 0.528, 0.17, 0.2823, 0.9559, -0.0806, 0.0782, 0.9574, 0.278, -0.8321, 0.528, 0.17, -0.6778, 0.3701, 0.6353, 0.2823, 0.9559, -0.0806, -0.7445, -0.6327, -0.2128, -0.6778, 0.3701, 0.6353, -0.8321, 0.528, 0.17, -0.8767, -0.461, 0.1375, -0.7445, -0.6327, -0.2128, -0.8321, 0.528, 0.17, 0.2234, -0.0834, -0.9711, -0.7445, -0.6327, -0.2128, -0.8767, -0.461, 0.1375, 0.523, -0.278, -0.8057, 0.2234, -0.0834, -0.9711, -0.8767, -0.461, 0.1375, 0.0782, 0.9574, 0.278, 0.2234, -0.0834, -0.9711, 0.523, -0.278, -0.8057, 0.0782, 0.9574, 0.278, 0.2823, 0.9559, -0.0806, 0.2234, -0.0834, -0.9711, -0.8321, 0.528, 0.17, 0.0782, 0.9574, 0.278, -0.5394, 0.2834, 0.7929, 0.0181, 0.0769, -0.9969, -0.8321, 0.528, 0.17, -0.5394, 0.2834, 0.7929, -0.5364, 0.2877, 0.7934, -0.8321, 0.528, 0.17, 0.0181, 0.0769, -0.9969, -0.5364, 0.2877, 0.7934, -0.8767, -0.461, 0.1375, -0.8321, 0.528, 0.17, -0.8767, -0.461, 0.1375, 0.8156, -0.5171, -0.2593, 0.523, -0.278, -0.8057, -0.8767, -0.461, 0.1375, -0.5364, 0.2877, 0.7934, 0.8156, -0.5171, -0.2593, 0.0782, 0.9574, 0.278, 0.523, -0.278, -0.8057, 0.8156, -0.5171, -0.2593, -0.5394, 0.2834, 0.7929, 0.0782, 0.9574, 0.278, 0.8156, -0.5171, -0.2593, 0.174, -0.1953, -0.9651, 0.7737, -0.5787, 0.2579, 0.6006, -0.7849, 0.1519, 0.174, -0.1953, -0.9651, 0.3707, 0.0834, -0.925, 0.7737, -0.5787, 0.2579, -0.8978, 0.2608, -0.3548, 0.3707, 0.0834, -0.925, 0.174, -0.1953, -0.9651, -0.8978, 0.2608, -0.3548, -0.7738, 0.5785, -0.258, 0.3707, 0.0834, -0.925, -0.3724, -0.0825, 0.9244, -0.7738, 0.5785, -0.258, -0.8978, 0.2608, -0.3548, -0.5112, -0.315, 0.7996, -0.3724, -0.0825, 0.9244, -0.8978, 0.2608, -0.3548, 0.7737, -0.5787, 0.2579, -0.3724, -0.0825, 0.9244, -0.5112, -0.315, 0.7996, 0.6006, -0.7849, 0.1519, 0.7737, -0.5787, 0.2579, -0.5112, -0.315, 0.7996, -0.1281, -0.5799, -0.8045, 0.6006, -0.7849, 0.1519, 0.7017, -0.6735, -0.2323, -0.1281, -0.5799, -0.8045, 0.174, -0.1953, -0.9651, 0.6006, -0.7849, 0.1519, -0.8978, 0.2608, -0.3548, 0.174, -0.1953, -0.9651, -0.1281, -0.5799, -0.8045, -0.6729, 0.2405, -0.6995, -0.8978, 0.2608, -0.3548, -0.1281, -0.5799, -0.8045, -0.5112, -0.315, 0.7996, -0.8978, 0.2608, -0.3548, -0.6729, 0.2405, -0.6995, -0.3265, 0.0008, 0.9452, -0.5112, -0.315, 0.7996, -0.6729, 0.2405, -0.6995, 0.7017, -0.6735, -0.2323, -0.5112, -0.315, 0.7996, -0.3265, 0.0008, 0.9452, 0.7017, -0.6735, -0.2323, 0.6006, -0.7849, 0.1519, -0.5112, -0.315, 0.7996, -0.1281, -0.5799, -0.8045, 0.7017, -0.6735, -0.2323, 0.3113, -0.0151, -0.9502, -0.5698, -0.5146, 0.6407, -0.1281, -0.5799, -0.8045, 0.3113, -0.0151, -0.9502, 0.316, -0.018, -0.9486, -0.1281, -0.5799, -0.8045, -0.5698, -0.5146, 0.6407, 0.316, -0.018, -0.9486, -0.6729, 0.2405, -0.6995, -0.1281, -0.5799, -0.8045, -0.6729, 0.2405, -0.6995, 0.0683, 0.5262, 0.8476, -0.3265, 0.0008, 0.9452, -0.6729, 0.2405, -0.6995, 0.316, -0.018, -0.9486, 0.0683, 0.5262, 0.8476, 0.7017, -0.6735, -0.2323, -0.3265, 0.0008, 0.9452, 0.0683, 0.5262, 0.8476, 0.3113, -0.0151, -0.9502, 0.7017, -0.6735, -0.2323, 0.0683, 0.5262, 0.8476, ]\"))\n(define body-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, ]\"))\n", "flx/scm/renderer.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n(define (renderer gl)\n  (shader-cache-add gl \"main\" (list \"p\" \"n\" \"t\" \"c\") vertex-shader fragment-shader)\n  (list\n   gl\n   ()\n   (mat4.identity (mat4.create))\n   (mat4.identity (mat4.create))\n   (mat4.identity (mat4.create))\n   (list (state gl))\n   ()\n   #f\n   ()\n   (scenenode 0 (state gl) 0 \'())\n   ()\n   (vector 1 1 1)\n   45))\n\n(define (renderer-gl r) (list-ref r 0))\n(define (renderer-list r) (list-ref r 1))\n(define (renderer-modify-list r v) (list-replace r 1 v))\n(define (renderer-view r) (list-ref r 2))\n(define (renderer-camera r) (list-ref r 3))\n(define (renderer-modify-camera r v) (list-replace r 3 v))\n(define (renderer-world-to-screen r) (list-ref r 4))\n(define (renderer-stack r) (list-ref r 5))\n(define (renderer-modify-stack r v) (list-replace r 5 v))\n(define (renderer-immediate-prims r) (list-ref r 6))\n(define (renderer-modify-immediate-prims r v) (list-replace r 6 v))\n(define (renderer-hook r) (list-ref r 7))\n(define (renderer-modify-hook r v) (list-replace r 7 v))\n(define (renderer-prefab r) (list-ref r 8))\n(define (renderer-modify-prefab r v) (list-replace r 8 v))\n(define (renderer-scenegraph r) (list-ref r 9))\n(define (renderer-modify-scenegraph r v) (list-replace r 9 v))\n(define (renderer-grab-stack r) (list-ref r 10))\n(define (renderer-modify-grab-stack r v) (list-replace r 10 v))\n(define (renderer-clear-colour r) (list-ref r 11))\n(define (renderer-modify-clear-colour r v) (list-replace r 11 v))\n(define (renderer-view-angle r) (list-ref r 12))\n(define (renderer-modify-view-angle r v) (list-replace r 12 v))\n\n(define (renderer-add r p)\n  (renderer-modify-list r (cons p (renderer-list r))))\n\n(define (renderer-stack-dup r)\n  (renderer-modify-stack\n   r (cons (state-clone (car (renderer-stack r)))\n\t   (renderer-stack r))))\n\n(define (renderer-stack-pop r)\n  (renderer-modify-stack\n   r (cdr (renderer-stack r))))\n\n(define (renderer-stack-top r)\n  (car (renderer-stack r)))\n\n(define (renderer-top-tx r)\n  (state-tx (renderer-stack-top r)))\n\n(define (renderer-current-tx r)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    ;; either modify the grabbed primitive or the stack top\n    (if grabbed\n\t(state-tx (scenenode-state grabbed))\n\t(state-tx (renderer-stack-top r)))))\n\n(define (renderer-global-tx r)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    (if grabbed\n\t(scenenode-global-tx grabbed)\n\t(state-tx (renderer-stack-top r)))))\n\n(define (renderer-modify-current-state r fn)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    ;; either modify the grabbed primitive or the stack top\n    (if grabbed\n\t(begin \n\t  (scenenode-modify-state! grabbed (fn (scenenode-state grabbed)))\n\t  r) ;; need to return the unchanged renderer\n\t(renderer-modify-stack\n\t r (cons (fn (car (renderer-stack r)))\n\t\t (cdr (renderer-stack r)))))))\n\n(define (renderer-immediate-add r p)\n  (renderer-modify-immediate-prims\n   r (cons\n      ;; state, and a primitive to render in\n      (list (state-clone (renderer-stack-top r)) p)\n      (renderer-immediate-prims r))))\n\n(define (renderer-immediate-clear r)\n  (renderer-modify-immediate-prims r ()))\n\n(define (renderer-grab-stack-push r id)\n  (let ((node (scenegraph-find (renderer-scenegraph r) id))) \n    (if node\n\t(renderer-modify-grab-stack\n\t r (cons node\n\t\t (renderer-grab-stack r)))\n\tr)))\n    \n(define (renderer-grabbed? r)\n  (> (length (renderer-grab-stack r)) 0))\n\n(define (renderer-grab-stack-pop r)\n  (renderer-modify-grab-stack r (cdr (renderer-grab-stack r))))\n\n(define (renderer-grab-stack-top r)\n  (if (null? (renderer-grab-stack r))\n      #f\n      (car (renderer-grab-stack r))))\n\n(define (renderer-render r t)\n  (let ((gl (renderer-gl r))\n\t(hook (renderer-hook r))\n\t(view-camera (mat4.create))\n\t(camera-pos (vector 0 0 0)))\n    \n    (gl.viewport 0 0 gl.viewportWidth gl.viewportHeight)\n    (gl.clearColor (vx (renderer-clear-colour r)) \n\t\t   (vy (renderer-clear-colour r))\n\t\t   (vz (renderer-clear-colour r))\n\t\t   (list-ref (renderer-clear-colour r) 3))\n    (gl.clear (js \"gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT\"))\n\n\n    (mat4.perspective \n     (renderer-view-angle r) \n     (/ gl.viewportWidth gl.viewportHeight) 0.1 1000.0\n     (renderer-view r))\n    \n    (gl.enable gl.BLEND)\n    (gl.blendFunc gl.SRC_ALPHA gl.ONE_MINUS_SRC_ALPHA)\n\n    ;; for scene inspection purposes...\n    (mat4.multiply (renderer-view r) (renderer-camera r) (renderer-world-to-screen r))\n    (mat4.multiply (renderer-view r) (renderer-camera r) view-camera)\n    (mat4.multiplyVec3 view-camera (vector 0 0 0) camera-pos)\n\n    (mat4.identity (renderer-top-tx r))\n\n    (when hook (js \"try{\") (hook) (js \"} catch(e) { \") (display e) (js \"}\"))\n\n    ;; immediate mode\n    (let ((ident (mat4.identity (mat4.create))))\n      (for-each\n       (lambda (p)\n\t (let ((state (car p))\n\t       (prim (cadr p)))\n\t   (primitive-render prim gl view-camera camera-pos state ident)))\n       (renderer-immediate-prims r))\n      \n      ;; retained mode\n      (scenegraph-render (renderer-scenegraph r) gl view-camera camera-pos ident))\n    (renderer-immediate-clear r)))\n\n(define (assemble-polyprim gl vertices normals texcoords)\n  (primitive\n   \'polyprim\n   (build-polyprim\n    gl\n    (make-pdata \n     (list \"p\" \"n\" \"t\" \"c\") \n     (/ (length vertices) 4)\n     (pdata-interleave-pdata-util \n      (list vertices normals texcoords \n\t    (build-list (* (length vertices) 3) (lambda (_) 1)))))\n    )))\n\n;; todo - probably replace these with the import code path to simplify things...\n(define (renderer-build-prefab r)\n  (let ((gl (renderer-gl r)))\n    (renderer-modify-prefab\n     r\n     (list\n      (assemble-polyprim gl unit-cube-vertices unit-cube-normals unit-cube-texcoords)\n      (assemble-polyprim gl sphere-vertices sphere-normals sphere-texcoords)\n      (assemble-polyprim gl torus-vertices torus-normals torus-texcoords)\n      ))))\n\n(define (renderer-print r)\n  (scenegraph-print (renderer-scenegraph r) 0))\n", "models/circlefan.obj": "# Blender v2.69 (sub 0) OBJ File: \'\'\n# www.blender.org\no Circle\nv 0.000000 0.541947 -0.000000\nv -0.105729 0.531534 -0.000000\nv -0.207394 0.500694 -0.000000\nv -0.301090 0.450613 -0.000000\nv -0.383214 0.383214 -0.000000\nv -0.450613 0.301090 -0.000000\nv -0.500694 0.207394 -0.000000\nv -0.531534 0.105729 -0.000000\nv -0.541947 0.000000 -0.000000\nv -0.531534 -0.105729 0.000000\nv -0.500694 -0.207394 0.000000\nv -0.450613 -0.301090 0.000000\nv -0.383214 -0.383214 0.000000\nv -0.301090 -0.450613 0.000000\nv -0.207394 -0.500694 0.000000\nv -0.105728 -0.531534 0.000000\nv 0.000000 -0.541947 0.000000\nv 0.105729 -0.531534 0.000000\nv 0.207394 -0.500694 0.000000\nv 0.301090 -0.450612 0.000000\nv 0.383215 -0.383214 0.000000\nv 0.450613 -0.301089 0.000000\nv 0.500694 -0.207394 0.000000\nv 0.531534 -0.105728 0.000000\nv 0.541947 0.000001 -0.000000\nv 0.531534 0.105729 -0.000000\nv 0.500694 0.207395 -0.000000\nv 0.450612 0.301090 -0.000000\nv 0.383214 0.383215 -0.000000\nv 0.301089 0.450613 -0.000000\nv 0.207393 0.500694 -0.000000\nv 0.105728 0.531534 -0.000000\nv 0.000000 -0.000000 0.000000\nvt 0.403897 0.974328\nvt 0.313273 0.946838\nvt 0.498143 0.500523\nvt 0.229754 0.902196\nvt 0.156548 0.842118\nvt 0.096470 0.768912\nvt 0.051828 0.685393\nvt 0.024338 0.594769\nvt 0.015055 0.500523\nvt 0.024338 0.406277\nvt 0.051828 0.315654\nvt 0.096470 0.232134\nvt 0.156548 0.158929\nvt 0.229754 0.098851\nvt 0.313273 0.054208\nvt 0.403897 0.026718\nvt 0.498143 0.017436\nvt 0.592389 0.026718\nvt 0.683012 0.054209\nvt 0.766532 0.098851\nvt 0.839737 0.158929\nvt 0.899815 0.232134\nvt 0.944457 0.315654\nvt 0.971948 0.406278\nvt 0.981230 0.500524\nvt 0.971948 0.594769\nvt 0.944457 0.685393\nvt 0.899815 0.768913\nvt 0.839737 0.842118\nvt 0.766531 0.902196\nvt 0.683012 0.946838\nvt 0.592388 0.974328\nvt 0.498143 0.983611\nvn 0.000000 0.000000 1.000000\ns off\nf 2/1/1 3/2/1 33/3/1\nf 3/2/1 4/4/1 33/3/1\nf 4/4/1 5/5/1 33/3/1\nf 5/5/1 6/6/1 33/3/1\nf 6/6/1 7/7/1 33/3/1\nf 7/7/1 8/8/1 33/3/1\nf 8/8/1 9/9/1 33/3/1\nf 9/9/1 10/10/1 33/3/1\nf 10/10/1 11/11/1 33/3/1\nf 11/11/1 12/12/1 33/3/1\nf 12/12/1 13/13/1 33/3/1\nf 13/13/1 14/14/1 33/3/1\nf 14/14/1 15/15/1 33/3/1\nf 15/15/1 16/16/1 33/3/1\nf 16/16/1 17/17/1 33/3/1\nf 17/17/1 18/18/1 33/3/1\nf 18/18/1 19/19/1 33/3/1\nf 19/19/1 20/20/1 33/3/1\nf 20/20/1 21/21/1 33/3/1\nf 21/21/1 22/22/1 33/3/1\nf 22/22/1 23/23/1 33/3/1\nf 23/23/1 24/24/1 33/3/1\nf 24/24/1 25/25/1 33/3/1\nf 25/25/1 26/26/1 33/3/1\nf 26/26/1 27/27/1 33/3/1\nf 27/27/1 28/28/1 33/3/1\nf 28/28/1 29/29/1 33/3/1\nf 29/29/1 30/30/1 33/3/1\nf 30/30/1 31/31/1 33/3/1\nf 31/31/1 32/32/1 33/3/1\nf 32/32/1 1/33/1 33/3/1\nf 1/33/1 2/1/1 33/3/1\n", "flx/scm/fluxus.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(load \"flx/scm/base.jscm\")\n(load \"flx/scm/texture.jscm\")\n(load \"flx/scm/maths.jscm\")\n(load \"flx/scm/glsl.jscm\")\n(load \"flx/scm/state.jscm\")\n(load \"flx/scm/pdata.jscm\")\n(load \"flx/scm/scenegraph.jscm\")\n(load \"flx/scm/primitive.jscm\")\n(load \"flx/scm/data.jscm\")\n(load \"flx/scm/shaders.jscm\")\n(load \"flx/scm/renderer.jscm\")\n(load \"flx/scm/instanceprim.jscm\")\n(load \"flx/scm/polyprim.jscm\")\n(load \"flx/scm/geometry.jscm\")\n(load \"flx/scm/meshcache.jscm\")\n(load \"flx/scm/shadercache.jscm\")\n\n(define the-renderer 0)\n\n(define flx-start-time (js \"new Date().getTime()/1000\"))\n \n(define (time) \n  (let ((time-now (js \"new Date()\")))\n    (- (/ (time-now.getTime) 1000) \n       flx_start_time)))\n\n(define (push) (set! the-renderer (renderer-stack-dup the-renderer)))\n(define (pop) (set! the-renderer (renderer-stack-pop the-renderer)))\n\n;; due to the way with-primitive macro works, an unknown/bad\n;; primitive id with cause following state modifications to \n;; happen to the global state!!!\n(define (grab id) (set! the-renderer (renderer-grab-stack-push the-renderer id)))\n(define (ungrab) (set! the-renderer (renderer-grab-stack-pop the-renderer)))\n\n(define (identity)\n  (mat4.identity (renderer-current-tx the-renderer)))\n\n(define (translate v)\n  (mat4.translate (renderer-current-tx the-renderer) v))\n\n(define (rotate v)\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vx v) 0.0174532925) (list 1 0 0))\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vy v) 0.0174532925) (list 0 1 0))\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vz v) 0.0174532925) (list 0 0 1)))\n\n(define aim-matrix (mat4.create))\n\n(define (maim v up)\n  (let ((l (vector 0 0 0))\n\t(u (vector 0 0 0)))\n    (vec3.cross v up l)\n    (vec3.cross v l u)\n\n    (js \"aim_matrix[0]=vx(v);\")\n    (js \"aim_matrix[1]=vy(v);\")\n    (js \"aim_matrix[2]=vz(v);\")\n    (js \"aim_matrix[3]=0;\")\n\n    (js \"aim_matrix[4]=vx(l);\")\n    (js \"aim_matrix[5]=vy(l);\")\n    (js \"aim_matrix[6]=vz(l);\")\n    (js \"aim_matrix[7]=0;\")\n\n    (js \"aim_matrix[8]=vx(u);\")\n    (js \"aim_matrix[9]=vy(u);\")\n    (js \"aim_matrix[10]=vz(u);\")\n    (js \"aim_matrix[11]=0;\")\n\n    (js \"aim_matrix[12]=0;\")\n    (js \"aim_matrix[13]=0;\")\n    (js \"aim_matrix[14]=0;\")\n    (js \"aim_matrix[15]=1;\")\n\n    (mat4.multiply (renderer-current-tx the-renderer) aim-matrix)))\n\n(define (concat m)\n    (mat4.multiply (renderer-current-tx the-renderer) m))\n\n(define (get-transform)\n  (renderer-current-tx the-renderer))\n\n(define (get-global-transform)\n  (renderer-global-tx the-renderer))\n\n(define (camera-transform)\n  (renderer-camera the-renderer))\n\n(define (set-camera-transform tx)\n  (set! the-renderer (renderer-modify-camera the-renderer tx)))\n\n(define (set-camera-angle a)\n  (set! the-renderer (renderer-modify-view-angle the-renderer a)))\n\n;;(define (vtransform m v)\n;; (mat4.multiplyVec3 m v))\n\n(define (clear-colour col)\n  (set! the-renderer (renderer-modify-clear-colour the-renderer col)))\n\n(define (view-transform)\n  (renderer-view the-renderer))\n\n;; fudged to match canvas...\n(define (project-point p)\n  (let ((ret (list (vx p) (vy p) (vz p) 1))\n        (gl (renderer-gl the-renderer)))\n    (mat4.multiplyVec4 (renderer-world-to-screen the-renderer) ret)\n    (let ((z (list-ref ret 3)))\n      (vec3.create \n       (list (* (+ (/ (vx ret) z) 1) gl.viewportWidth 0.5)\n\t     (* (+ (/ (- 0 (vy ret)) z) 1) gl.viewportHeight 0.5)\n\t     0)))))\n\n(define (primitive-screen-pos p)\n  (project-point\n   (with-primitive p (mtransform (get-transform) (vector 0 0 0)))))\n\n(define (primitive-global-screen-pos p)\n  (project-point\n   (with-primitive p (mtransform (get-global-transform) (vector 0 0 0)))))\n\n(define (scale v)\n  (mat4.scale (renderer-current-tx the-renderer) v))\n\n(define (load-texture name)\n  (load-texture-impl!\n   (renderer-gl the-renderer)\n   (+ \"textures/\" name)))\n\n(define (texture name)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-texture state name)))))\n\n(define (shader-compile name attrib-names vert frag)\n  (internal-load-shader-cache (renderer-gl the-renderer) name attrib-names vert frag))\n\n(define (shader-assign-compiled name)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n             (state-modify-shader\n              state\n              (shader-cache-search name))))))\n\n(define (shader vert frag)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n             (state-modify-shader\n              state\n              (build-shader (renderer-gl the-renderer) \n\t\t\t    (list \"p\" \"n\" \"t\" \"c\") vert frag))))))\n\n(define (shader-attrib-names names vert frag)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n\t (lambda (state)\n\t   (state-modify-shader\n\t    state\n\t    (build-shader (renderer-gl the-renderer) names vert frag))))))\n\n;; setting uniforms - this one sets the unform for this shader program\n;; affecting all primitives using it\n(define (shader-shared-uniform! name type value)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n\t     (let ((gl (renderer-gl the-renderer))\n\t\t   (shader (state-shader state)))\n\t       (gl.useProgram shader) \n\t       (internal-uniform! gl shader name type value)\n\t       state)))))\n\n;; setting uniforms - locally to this primitive state only\n(define (shader-uniform! name type value)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n\t     (let ((gl (renderer-gl the-renderer)))\n\t       (state-modify-uniform-items\n\t\tstate (set-uniform-item\n\t\t       (make-uniform-item name type value)\n\t\t       (state-uniform-items state))))))))\n\n(define (colour col)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-colour state col)))))\n\n(define (every-frame-impl hook)\n  (set! the-renderer (renderer-modify-hook the-renderer hook)))\n\n(define (draw-cube)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 0))))\n\n(define (draw-sphere)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 1))))\n\n(define (draw-torus)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 2))))\n\n(define (draw-obj obj)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) obj))))\n\n(define (build-polygons type size-verts)\n  (let ((gl (renderer-gl the-renderer)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-empty-polyprim gl type size-verts)))))\n\n(define (set-hint! hint)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer (lambda (state)\n\t     (state-modify-hints state (bitwise-or (state-hints state) hint))))))\n\n(define (clear-hints!)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer (lambda (state)\n\t     (state-modify-hints state 0)))))\n\n(define (hint-none) (clear-hints!))\n(define (hint-solid) (set-hint! FLX_HINT_SOLID))\n(define (hint-wire) (set-hint! FLX_HINT_WIRE))\n(define (hint-ignore-depth) (set-hint! FLX_HINT_IGNORE_DEPTH))\n(define (hint-nozwrite) (set-hint! FLX_HINT_NOZWRITE))\n(define (hint-cullface) (set-hint! FLX_HINT_CULL_FACE))\n(define (hint-cullccw) (set-hint! FLX_HINT_CULL_CCW))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; loading meshes\n\n(define (load-primitive url)\n  (let ((gl (renderer-gl the-renderer))\n\t(raw (mesh-cache-search url)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-polyprim gl raw)))))\n\n(define (load-ply-primitive url)\n  (let ((gl (renderer-gl the-renderer))\n\t(raw (mesh-cache-search url)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-polyprim gl raw)))))\n\n;; (list\n;; \t(buffer gl \"p\" (list-ref raw 0) 3)\n;; \t(buffer gl \"n\" (list-ref raw 1) 3)\n;; \t(buffer gl \"t\" (list-ref raw 0) 3)\n;; \t))))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; retained mode\n\n(define next-id 0)\n(define (new-id) \n  (set! next-id (+ next-id 1))\n  next-id)\n\n(define (parent id)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-parent state id)))))\n\n(define (hide v)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-hidden state v)))))\n\n(define (add-to-scenegraph! prim)\n  (let ((id (new-id)))\n    (set! the-renderer (renderer-modify-scenegraph\n\t     the-renderer \n\t     (scenegraph-add \n\t      (renderer-scenegraph the-renderer) \n\t      (state-parent (renderer-stack-top the-renderer)) ;; parent from state \n\t      (scenenode\n\t       id \n\t       (state-clone (renderer-stack-top the-renderer)) ;; stack\n\t       prim\n\t       \'() ;; children\n\t       ))))\n    id))\n\n(define (destroy id)\n  (set! the-renderer \n\t(renderer-modify-scenegraph\n\t the-renderer (scenegraph-remove \n\t\t       (renderer-scenegraph the-renderer) \n\t\t       id))))\n\n;(define (apply-transform)\n;  (let ((tx (get-transform)))\n;    (pdata-map!\n;     (lambda (p)\n;       (vtransform tx p))\n;     \"p\")))\n\n(define (build-cube)\n  (add-to-scenegraph! (list-ref (renderer-prefab the-renderer) 0)))\n\n(define (build-instance polyref)\n  (add-to-scenegraph! \n   (primitive \n    \'instanceprim \n    (instanceprim \n     (primitive-inner\n      (scenenode-primitive \n       (scenegraph-find \n\t(renderer-scenegraph the-renderer) \n\tpolyref)))))))\n\n(define (build-locator)\n  ;; locator is an empty primitive for positioning things \n  ;; in the scenegraph - we might want to add axis rendering\n  ;; for debugging\n  (add-to-scenegraph! \n   (primitive \'locatorprim 0)))\n\n(define (pdata-map! fn name)\n  (when (renderer-grabbed? the-renderer)\n\t(pdata-internal-map!\n\t (renderer-gl the-renderer) \n\t ;; todo: check type is polyprim\n\t (polyprim-pdata \n\t  (primitive-inner\n\t   (scenenode-primitive (renderer-grab-stack-top the-renderer))))\n\t fn name)))\n\n(define (pdata-add! name)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-add!\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name))))\n\n(define (pdata-size)\n  (when (renderer-grabbed? the-renderer)\n\t;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-size-verts  \n\t   (polyprim-pdata pp)))))\n\n(define (pdata-set! name pos value)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-set!\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name (modulo pos (polyprim-size pp)) value))))\n\n(define (pdata-ref name pos)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-ref\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name (modulo pos (polyprim-size pp))))))\n\n;; new command to upload the vbo from the modified data - use for \n;; pdata-set! (maybe pdata-map! in the future???)\n(define (pdata-upload!)\n  (let ((grabbed (renderer-grab-stack-top the-renderer)))\n    (when grabbed\n\t  (pdata-update-vbo! \n\t   (renderer-gl the-renderer)\n\t   (polyprim-pdata\n\t    (primitive-inner\n\t     (scenenode-primitive grabbed)))))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define t 0)\n(define stat-period 60)\n(define last-stat 0)\n\n(define (crank)\n  (outer-render))\n\n(define (debug-renderer)\n  (renderer-print the-renderer))\n\n(define (outer-render)\n  (set! t (+ t 0.1))\n  (set! the-renderer (renderer-render the-renderer t))\n  \n ; (set! stat-period (- stat-period 1))            \n  (when (zero? stat-period)\n\t(set! stat-period 60)\n\t(set! current-fps (/ (* stat-period 1000) (- (Date.now) last-stat)))\n\t(console.log (+ \"FPS: \" (trunc current-fps)))\n\t(set! last-stat (Date.now)))\n  (window.requestAnimationFrame outer-render))\n\n(define (print-renderer-top)\n  (msg (renderer-stack-top the-renderer)))\n\n(define (clear)\n  (let ((canvas (document.getElementById \"webgl-canvas\")))\n    (let ((gl (canvas.getContext \"experimental-webgl\")))\n      (set! gl.viewportWidth canvas.width)\n      (set! gl.viewportHeight canvas.height)\n      (set! the-renderer (renderer gl))\n      ;; set up camera transform\n      (mat4.translate (renderer-camera the-renderer) (list 0 0 -38))\n      (set! the-renderer (renderer-build-prefab the-renderer))\n      (gl.clearColor 0.0 0.0 0.0 1.0)\n      (gl.enable gl.DEPTH_TEST)\n      (gl.disable gl.CULL_FACE)\n      ;; make sure the default texture is loaded\n      (texture (load-texture \"white.png\"))\n      ))))\n\n(define (resize-glcanvas canvas) \n  ;; Lookup the size the browser is displaying the canvas.\n  (let ((displayWidth canvas.clientWidth)\n\t(displayHeight canvas.clientHeight)) \n    ;; Check if the canvas is not the same size.\n    (when (or (not (eq? canvas.width displayWidth))\n\t      (not (eq? canvas.height displayHeight)))\n\t  ;; Make the canvas the same size\n\t  (set! canvas.width displayWidth)\n\t  (set! canvas.height displayHeight)\n\t  (let ((gl (canvas.getContext \"experimental-webgl\")))\n\t    (set! gl.viewportWidth canvas.width)\n\t    (set! gl.viewportHeight canvas.height)))))\n\n\n(clear)\n", "flx/scm/shadercache.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2018 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define shader-cache ())\n(define shaders-load-outstanding 0)\n(define shaders-total-load 0)\n\n(define (shaders-loaded?)\n  (eq? shaders-load-outstanding 0))\n\n(define (internal-load-shader-cache gl name attrib-names vert frag)\n  (set! shaders-load-outstanding (+ shaders-load-outstanding 1))\n  (set! shaders-total-load (+ shaders-total-load 1))\n  (load-resource-txt \n   vert\n   (lambda (vert-code)\n     (load-resource-txt\n      frag\n      (lambda (frag-code)\t\t\n\t(set! shaders-load-outstanding (- shaders-load-outstanding 1))\n\t(shader-cache-add gl name attrib-names vert-code frag-code))))))\n\n(define (shader-cache-add gl name attrib-names vert-code frag-code)\n  (set! shader-cache \n\t(cons \n\t (list name (build-shader gl attrib-names vert-code frag-code))\n\t shader-cache)))\n\n(define (shader-cache-search name)\n  (let ((shader (assoc name shader-cache)))\n    (cond \n     (shader (cadr shader)) ;; deep copy!?\n     (else \n      (msg (+ \"shader not loaded into cache in preload: \" name))\n      (wewe)))))\n\t\n", "flx/scm/base.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n;; basic scheme stuff we need, and some tests\n\n(define display (lambda (str) (console.log str)))\n(define newline (lambda () (console.log \"\\n\")))\n\n(define (ditto-print-list a)\n  (let ((str \"\"))\n    (set! str (+ str \"[\"))\n    (js \"for (var i=0; i<a.length; i++) {\")\n    (set! str (+ str (ditto-pretty-print (list-ref a i))))\n    (when (not (eq? i (- a.length 1))) (set! str (+ str \" \")))\n    (js \"}\")\n    (set! str (+ str \"]\"))\n    str))\n\n(define (ditto-pretty-print a)\n  (cond\n   ((list? a) (ditto-print-list a))\n   (else (+ \"\" a))))\n\n(define (msg a) \n  (console.log (ditto-pretty-print a)))\n\n(define (dbg a) (msg a) a)\n(define (error a) (msg a))\n\n(define (zero? n) (js \"n===0\"))\n(define (eqv? a b) (eq? a b))\n(define (equal? a b) (eq? a b))\n(define (floor n) (Math.floor n))\n(define (fmod a b) (js \"Number((a - (Math.floor(a / b) * b)).toPrecision(8));\"))\n\n(define (random n)\n  (Math.floor (* (Math.random) n)))\n\n(define (random-range a b)\n  (+ a (Math.floor (* (Math.random) (- b a)))))\n\n(define (rndf) (Math.random))\n\n(define (max a b) (if (> a b) a b))\n(define (min a b) (if (< a b) a b))\n\n(define (substring str s e)\n  (js \"str.substring(s, e);\"))\n\n(define (string-length str)\n  (js \"str.length\"))\n\n(define (string->list str)\n  (str.split \"\"))\n\n(define (string-ref str i)\n  (js \"str[i]\"))\n\n;; replaced by underlying iterative version\n;;(define foldl\n;;  (lambda (fn v l)\n;;    (cond\n;;     ((null? l) v)\n;;     (else (foldl fn (fn (car l) v) (cdr l))))))\n\n\n;; replaced by underlying iterative version\n;; (define (list-contains? l v)\n;;   (cond\n;;     ((null? l) #f)\n;;     ((eq? (car l) v) #t)\n;;     (else (list-contains? (cdr l) v))))\n\n\n(define map\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (append r (list (fn i))))\n     () l)))\n\n(define map2\n  (lambda (fn l l2)\n    (foldl\n     (lambda (a b r)\n       (append r (list (fn a b))))\n     () l l2)))\n\n(define filter\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (if (fn i) (append r (list i)) r))\n     () l)))\n\n(define for-each\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (fn i))\n     ()\n     l) #f))\n\n(define (assoc k l)\n  (foldl\n   (lambda (i r)\n     (if (eq? (car i) k) i r))\n   #f l))\n\n;; index versions provide count for first argument\n\n(define index-foldl\n  (lambda (fn s l)\n    (cadr (foldl\n           (lambda (e r)\n             (list\n              (+ (car r) 1)\n              (fn (car r) e (cadr r))))\n           (list 0 s)\n           l))))\n\n\n(define index-map\n  (lambda (fn l)\n    (cadr (foldl\n           (lambda (e r)\n             (list\n              (+ (car r) 1)\n              (append (cadr r) (list (fn (car r) e)))))\n           (list 0 ())\n           l))))\n\n(define index-for-each\n  (lambda (fn l)\n    (foldl\n     (lambda (e r)\n       (fn r e)\n       (+ r 1))\n     0 l)))\n\n;; fix js modulo irt negative numbers\n(define (modulo m n) (js \"((m%n)+n)%n\"))\n(define (quotient m n) (Math.floor (/ m n)))\n\n(define (sin a) (Math.sin a))\n(define (cos a) (Math.cos a))\n\n(define list-equal?\n  (lambda (a b)\n    (define _\n      (lambda (a b)\n        (cond\n         ((null? a) #t)\n         ((not (eq? (car a) (car b))) #f)\n         (else (_ (cdr a) (cdr b))))))\n    (if (eq? (length a) (length b))\n        (_ a b) #f)))\n\n;; replaced by js version\n;;(define build-list\n;;  (lambda (n fn)\n;;    (define _\n;;      (lambda (i)\n;;        (cond\n;;         ((eq? i (- n 1)) ())\n;;         (else\n;;          (cons (fn n) (_ (+ i 1) fn))))))\n;;    (_ 0)))\n\n(define print-list\n  (lambda (l)\n    (when (not (null? l))\n          (console.log (car l))\n          (print-list (cdr l)))))\n\n(define reverse\n  (lambda (l)\n    (cond\n     ((null? l) ())\n     (else\n      (append (reverse (cdr l)) (list (car l)))))))\n\n(define (choose l)\n  (list-ref l (random (length l))))\n\n(define (delete-n l n)\n  (if (eq? n 0)\n      (cdr l)\n      (append (list (car l)) (delete-n (cdr l) (- n 1)))))\n\n(define (shuffle l)\n  (cond ((null? l) ())\n        ((< (length l) 2)\n         (list (car l)))\n        (else\n         (let ((item (random (length l))))\n           (cons (list-ref l item)\n                 (shuffle (delete-n l item)))))))\n\n(define (crop l n)\n  (cond\n   ((null? l) ())\n   ((zero? n) ())\n   (else (cons (car l) (crop (cdr l) (- n 1))))))\n\n;; return (picked left-over)\n(define (pick-out-of l n)\n  (define (_ p l n)\n    (cond\n      ((or (null? l) (zero? n))\n       (list p l))\n      (else\n       (let ((item (random (length l))))\n         (_\n          (cons (list-ref l item) p)\n          (delete-n l item)\n          (- n 1))))))\n  (_ () l n))\n\n(define factorial\n  (lambda (n)\n    (if (= n 0) 1\n        (* n (factorial (- n 1))))))\n\n\n(define (symbol->string sym)\n  sym);; (ditto.symbol_string sym))\n\n(define (string->symbol str)\n  ;(ditto.find_symbol str)\n  str)\n\n;; convert code to text form\n; (define (scheme-txt v)\n;  (cond\n;   ((number? v) v)\n;   ((string? v) (string-append \"\\\"\" v \"\\\"\"))\n;   ((boolean? v) (if v \"#t\" \"#f\"))\n;   ((list? v)\n;    (cond\n;     ((null? v) \"()\")\n;     (else\n;      (list-txt v))))\n;   (else (msg (+ \"scheme->txt, unsupported type for \" v)))))\n;\n;(define (list-txt l)\n;  (define (_ l s)\n;    (cond\n;     ((null? l) s)\n;     (else\n;      (_ (cdr l)\n;         (string-append\n;          s\n;          (if (not (eq? s \"\")) \" \" \"\")\n;          (scheme-txt (car l)))))))\n;  (string-append \"(list \" (_ l \"\") \")\"))\n\n(define (assert condition message) \n  (when (not condition) \n\t(js \"; throw message || \'assertion failed\';\")))\n\n(define unit-test\n  (lambda ()\n    (define a 0)\n    (set! a 10)\n    (when (not (eq? 4 4)) (display \"eq? failed\"))\n    (when (eq? 2 4) (display \"eq?(2) failed\"))\n    (when (not (eq? (car (list 3 2 1)) 3)) (display \"car failed\"))\n    (when (not (eq? (cadr (list 3 2 1)) 2)) (display \"cadr failed\"))\n    (when (not (eq? (caddr (list 3 2 1)) 1)) (display \"caddr failed\"))\n\n    (when (not (eq? (begin 1 2 3) 3)) (display \"begin failed\"))\n    (when (not (eq? (list-ref (list 1 2 3) 2) 3)) (display \"list-ref failed\"))\n    (when (not (list? (list 1 2 3))) (display \"list? failed\"))\n    (when (list? 3) (display \"list?(2) failed\"))\n    (when (null? (list 1 2 3)) (display \"null? failed\"))\n    (when (not (null? (list))) (display \"null?(2) failed\"))\n    (when (not (eq? (length (list 1 2 3 4)) 4)) (display \"length failed\"))\n    (when (not (list-equal? (list 1 2 3 4) (list 1 2 3 4))) (display \"list-equal failed\"))\n    (when (list-equal? (list 1 2 3 4) (list 1 4 3 4)) (display \"list-equal(2) failed\"))\n    (when (not (list-equal? (append (list 1 2 3) (list 4 5 6)) (list 1 2 3 4 5 6)))\n          (display \"append failed\"))\n    (when (not (list-equal? (cdr (list 3 2 1)) (list 2 1))) (display \"cdr failed\"))\n    (when (not (list-equal? (cons 1 (list 2 3)) (list 1 2 3))) (display \"cons failed\"))\n    (when (not (eq? (foldl (lambda (a r) (+ a r)) 0 (list 1 2 1 1)) 5))\n          (display \"fold failed\"))\n    (when (not (eq? (foldl (lambda (a b r) (+ a b r)) 0 (list 1 2 1 1) (list 2 2 5 5)) 19))\n          (display \"fold multiple failed\"))\n    (when (not (list-equal? (map (lambda (i) (+ i 1)) (list 1 2 3 4)) (list 2 3 4 5)))\n          (display \"map failed\"))\n    (when (not (eq? (let ((a 1) (b 2) (c 3)) (+ a b c)) 6)) (display \"let failed\"))\n    (when (not (eq? (let ((a 1) (b 2) (c 3)) (list 2 3) (+ a b c)) 6)) (display \"let(2) failed\"))\n    (when (not (eq? a 10)) (display \"set! failed\"))\n    (when (not (eq? (factorial 10) 3628800)) (display \"factorial test failed\"))\n    (when (not (eq? (list-ref (list-replace (list 1 2 3) 2 4) 2) 4)) (display \"list-replace failed\"))\n    (when (not (list-equal? (build-list 10 (lambda (n) n)) (list 0 1 2 3 4 5 6 7 8 9)))\n          (display \"build-list failed\"))\n    (when (eq? (not (+ 200 3)) 203) (display \"+ failed\"))\n    (when (not (eq? (cond (#t (+ 3 2) (+ 100 1)) (else (+ 4 3))) 101)) (display \"cond test failed\"))\n    (when (not (eq? (when #t (+ 3 2) (+ 100 1)) 101)) (display \"when test failed\"))\n    (when (not (eq? (cadr (assoc 2 (list (list 3 \"one\") (list 2 \"three\")))) \"three\")) (display \"assoc test failed\"))\n    (when (not (eq? (symbol->string \'one) \"one\")) (display \"symbol->string failed\"))\n    ;;(when (not (eq? (string->symbol \"one\") \'one)) (display \"string->symbol failed\"))\n    ;;(msg (string->symbol \"one\"))\n    ;;(msg \'one)\n    ))\n\n(unit-test)\n", "shaders/person.frag": "precision highp float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = dot(vec3(0,0,1),n);\n\n    if(texture2D(texture, vec2(T.s, T.t)).a == 0.0) {\n        discard;\n    }\n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*C*diffuse, \n                        texture2D(texture, vec2(T.s, T.t)).a);\n}\n", "models/plane.obj": "# Blender v2.69 (sub 0) OBJ File: \'shapes.blend\'\n# www.blender.org\no Cube\nv 0.250000 0.250000 -0.000946\nv 0.250000 -0.250000 -0.000946\nv -0.250000 -0.250000 -0.000946\nv -0.250000 0.250000 -0.000946\nvt 1.005168 1.005168\nvt -0.005168 -0.005168\nvt 1.005168 -0.005168\nvt -0.005168 1.005168\nvn 0.000000 0.000000 1.000000\ns off\nf 1/1/1 3/2/1 2/3/1\nf 4/4/1 3/2/1 1/1/1\n", "flx/scm/shaders.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n (define vertex-shader\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-shader\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = dot(vec3(0,1,0),n);\n\n    if(texture2D(texture, vec2(T.s, T.t)).a == 0.0) {\n        discard;\n    }\n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*C*diffuse, \n                        texture2D(texture, vec2(T.s, T.t)).a);\n}\n\")\n\n\n\n\n\n\n\n(define fragment-shader-spec\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = min(1.0,dot(vec3(0.8,0.8,0),n));\n    float diffuse2 = max(0.1,dot(vec3(0,1,0),n));\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                                (DiffuseColour*diffuse + \n\t\t\t\tvec3(1,0.5,0.2)*diffuse2*0.1), 1.0);\n\t\t\t\t\n}\n\")\n\n;;                        (vec3(0,0,1) + \n;;                        step(1.0,length(P))*vec3(0,0.5,0)+\n;;                        step(1.005,length(P))*vec3(0.5,0,0)+\n;;                        step(1.02,length(P))*vec3(1,1,1))*0.75\n\n\n\n (define vertex-organism\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-organism\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = clamp(dot(vec3(0,1,0),n),0.5,1.0); \n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*diffuse, 1.0);\n\n/*    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour, 1.0);\n*/\n}\n\")\n\n\n (define vertex-disc\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nvarying vec3 C;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-disc\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nvarying vec3 C;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = min(1.0,dot(vec3(0,1,0),n)+1.5);\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            C*DiffuseColour*diffuse, 1.0);\n\n}\n\")\n", "shaders/default.frag": "precision highp float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = dot(vec3(0,1,1),n);\n\n    if(texture2D(texture, vec2(T.s, T.t)).a == 0.0) {\n        discard;\n    }\n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*C*diffuse, \n                        texture2D(texture, vec2(T.s, T.t)).a);\n}\n", "flx/scm/canvas.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft Copyright (C) 2018 FoAM Kernow\n\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define screen-width 960)\n(define screen-height 540)\n\n(define canvas-mouse-x 0)\n(define canvas-mouse-y 0)\n(define canvas-mouse-state 0)\n(define canvas-mouse-zoom 0)\n(define canvas-mouse-zoom-delta 0)\n(define canvas-drag-x 0)\n(define canvas-drag-y 0)\n(define canvas-is-dragging #f)\n(define canvas-drag-fn (lambda () 0))\n(define canvas-mouse-clicked #f)\n\n(define canvas-event-occurred #f)\n\n(define webgl-canvas (document.getElementById \"webgl-canvas\"))\n(define canvas (document.getElementById \"canvas\"))\n(define ctx (canvas.getContext \"2d\"))\n\n(define (set-canvas-drag-fn fn)\n  (set! canvas-drag-fn fn))\n\n(define (canvas-init-defaults)\n  (set! ctx.fillStyle \"#000\")\n  (set! ctx.font \"30pt Dosis\")\n  )\n\n(define (resize-canvas canvas) \n  ;; Lookup the size the browser is displaying the canvas.\n  (let ((displayWidth canvas.clientWidth)\n\t(displayHeight canvas.clientHeight)) \n    ;; Check if the canvas is not the same size.\n    (when (or (not (eq? canvas.width displayWidth))\n\t      (not (eq? canvas.height displayHeight)))\n\t  ;; Make the canvas the same size\n\t  (set! canvas.width displayWidth)\n\t  (set! canvas.height displayHeight)\n\t  (set! screen-width canvas.width)\n\t  (set! screen-height canvas.height)\n\t  (canvas-init-defaults))))\n\n(set! window.onresize \n      (lambda ()\n\t(resize-canvas canvas)))\n\n(define (mouse-from-event canvas e state)\n  (let ((rect (canvas.getBoundingClientRect)))\n    (let ((sx (/ rect.width screen-width))\n          (sy (/ rect.height screen-height)))\n      (let ((nx (/ (- e.clientX rect.left) sx))\n\t    (ny (/ (- e.clientY rect.top) sy)))\n\t\n\t;; deal with dragging\n\t(when (and canvas-is-dragging (not canvas-event-occurred))\n\t      (set! canvas-drag-x (- nx canvas-mouse-x))\n\t      (set! canvas-drag-y (- ny canvas-mouse-y))\n\t      (canvas-drag-fn))      \n\n\t(set! canvas-event-occurred #f)\n\n\t(cond \n\t ((and (eq? state \"move\") (eq? canvas-mouse-state \"down\"))\n\t  ;; starting drag\n\t  (set! canvas-is-dragging #t))\n\t ((and canvas-is-dragging (eq? state \"up\"))\n\t  ;; ending drag\n\t  (set! canvas-is-dragging #f))\n\t (else 0))\n\t\n\t(set! canvas-mouse-x nx)\n\t(set! canvas-mouse-y ny)\n\n\t(if (and (eq? state \"down\") (not (eq? canvas-mouse-state \"down\")))\n\t    (set! canvas-mouse-clicked #t)\n\t    (set! canvas-mouse-clicked #f))\n\n\t(set! canvas-mouse-state state)))))\n\n(define (touch-from-event canvas e state)\n  (let ((e (car e.targetTouches)))\n    (mouse-from-event canvas e state)))\n\n(define (canvas-zoom e)\n  (let ((delta (if e.wheelDelta (/ e.wheelDelta 40) \n\t\t   (if e.detail (- e.detail) 0))))\n    (set! canvas-mouse-zoom-delta delta)\n    (set! canvas-mouse-zoom (+ canvas-mouse-zoom delta))\n    (e.preventDefault)))\n\n(define image-lib ())\n(define loaded-images #f)\n\n(define (canvas-loaded?)\n  loaded-images)\n\n(define (find-image fn l)\n  (cond\n   ((null? l) #f)\n   ((eq? (car (car l)) fn) (cadr (car l)))\n   (else (find-image fn (cdr l)))))\n\n(define (load-image! fn finished images)\n  (let ((image (js \"new Image()\")))\n    (set! image.onload\n          (lambda ()\n            (console.log (+ \"loaded \" (+ \"images/\" fn)))\n            (set! image-lib (cons (list fn image) image-lib))\n            (when (eq? (length image-lib)\n                       (length images))\n\t\t  (set! loaded-images #t)\n                  (finished))))\n;;    (console.log (+ \"loading \" (+ \"images/\" fn)))\n    (set! image.src (+ \"images/\" fn))))\n\n(define (load-images! l finished)\n  (for-each\n   (lambda (fn)\n     (load-image! fn finished l))\n   l))\n\n(define (canvas-setup)\n  (canvas.addEventListener\n   \"mousedown\" (lambda (e) (mouse-from-event canvas e \"down\")))\n  (canvas.addEventListener\n   \"touchstart\" (lambda (e) (touch-from-event canvas e \"down\")))\n  (canvas.addEventListener\n   \"mousemove\" (lambda (e) (mouse-from-event canvas e \"move\")))      \n  (canvas.addEventListener\n   \"touchmove\"\n   (lambda (e)\n     (e.preventDefault)\n     (touch-from-event canvas e \"move\")))      \n  (canvas.addEventListener\n   \"mouseup\" (lambda (e) (mouse-from-event canvas e \"up\")))\n;;  (canvas.addEventListener\n;;   \"touchend\" (lambda (e) (mouse-from-event canvas e \"up\")))\n;;  (canvas.addEventListener\n;;   \"touchcancel\" (lambda (e) (mouse-from-event canvas e \"up\")))\n  (canvas.addEventListener \"DOMMouseScroll\" canvas-zoom)\n  (canvas.addEventListener \"mousewheel\" canvas-zoom)\n\n  )\n\n", "flx/scm/geometry.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (point2-in-triangle? point a b c)\n  (define (sign2 a b c)\n    (- (* (- (vx a) (vx c)) \n\t  (- (vy b) (vy c))) \n       (* (- (vx b) (vx c)) \n\t  (- (vy a) (vy c)))))\n  (let ((b1 (< (sign2 point a b) 0))\n\t(b2 (< (sign2 point b c) 0))\n\t(b3 (< (sign2 point c a) 0)))\n    (and (eq? b1 b2) (eq? b2 b3))))\n\n(define (point3->barycentric point a b c)\n  (let ((v0 (vsub b a))\n\t(v1 (vsub c a))\n\t(v2 (vsub point a)))\n    (let ((d00 (vdot v0 v0))\n\t  (d01 (vdot v0 v1))\n\t  (d11 (vdot v1 v1))\n\t  (d20 (vdot v2 v0))\n\t  (d21 (vdot v2 v1)))\n      (let ((denom (- (* d00 d11) (* d01 d01))))\n\t(let ((v (/ (- (* d11 d20) (* d01 d21)) denom))\n\t      (w (/ (- (* d00 d21) (* d01 d20)) denom)))\n\t  (list v w (- 1 v w)))))))\n\n(define (barycentric->trilinear point a b c)\n  (vector\n   (/ (vx point) (vdist b c))\n   (/ (vy point) (vdist c a))\n   (/ (vz point) (vdist a b))))\n\n(define (geometry-unit-test)\n  (assert (point2-in-triangle? (vector 0.5 0.5 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0)) \"point in triangle 1\")\n  (assert (not \n\t   (point2-in-triangle? (vector 5 0.5 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0))) \"point in triangle 2\")\n  (assert (veq? (vector 0.3333333333333333 -0.3333333333333333 1)\n\t\t(point3->barycentric (vector 0 0 0) (vector 1 0 0) (vector 0 3 0) (vector 3 3 0))) \"barycentric 1\")\n  (assert (veq? (vector 1 0 0)\n\t\t(point3->barycentric (vector 0 0 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0))) \"barycentric 2\")  \n  )\n\n(geometry-unit-test)\n", "flx/scm/maths.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(js \"var sin=Math.sin\")\n(js \"var cos=Math.cos\")\n(js \"var pi = Math.PI\")\n(js \"var two_pi = Math.PI*2\")\n\n\n(define (sqrt a) (Math.sqrt a))\n(define (pow a b) (Math.pow a b))\n(define (square x) (* x x))\n(define (trunc x) (js \"~~x\"))\n(define (feq? a b) (< (Math.abs (- a b)) Number.EPSILON))\n\n(define (vector x y z) (list x y z))\n\n(define (vx v) (list-ref v 0))\n(define (vy v) (list-ref v 1))\n(define (vz v) (list-ref v 2))\n(define (vw v) (list-ref v 3))\n\n(define (veq? a b) \n  (and (feq? (vx a) (vx b))\n       (feq? (vy a) (vy b))\n       (feq? (vz a) (vz b))))\n\n(define (vector-clone v)\n  (vector (vx v) (vy v) (vz v)))\n\n(define (vadd a b)\n  (vector (+ (vx a) (vx b))\n          (+ (vy a) (vy b))\n          (+ (vz a) (vz b))))\n\n(define (vmag v)\n  (sqrt (+ (square (vx v))\n           (square (vy v))\n           (square (vz v)))))\n\n(define (vsub a b)\n  (vector (- (vx a) (vx b))\n          (- (vy a) (vy b))\n          (- (vz a) (vz b))))\n\n(define (vneg a)\n  (vector (- 0 (vx a))\n          (- 0 (vy a))\n          (- 0 (vz a))))\n\n(define (vmul v a)\n  (vector (* (vx v) a) (* (vy v) a) (* (vz v) a)))\n\n(define (vdiv v a)\n  (vector (/ (vx v) a) (/ (vy v) a) (/ (vz v) a)))\n\n(define (vdist a b)\n  (vmag (vsub a b)))\n\n(define (vlerp v1 v2 t)\n\t(vadd v1 (vmul (vsub v2 v1) t)))\n\n(define (vnormalise v)\n  (vdiv v (vmag v)))\n\n(define (vdot a b)\n  (+ (* (vx a) (vx b)) \n     (* (vy a) (vy b))\n     (* (vz a) (vz b))))\n\n(define (vcross a b)\n  (vector (- (* (vy a) (vz b)) (* (vz a) (vy b)))\n\t  (- (* (vz a) (vx b)) (* (vx a) (vz b)))\n\t  (- (* (vx a) (vy b)) (* (vy a) (vx b)))))\n\n(define (rndvec) (vector (rndf) (rndf) (rndf)))\n(define (crndvec) (vsub (rndvec) (vector 0.5 0.5 0.5)))\n(define (crndf) (- (rndf) 0.5))\n\n(define (hcrndvec s)\n  (let ((a (* (rndf) 360)))\n    (vector (* s (sin a)) (* s (cos a)) 0)))\n\n;; steal quats from the gl library\n(define rad-conv 0.017453292)\n\n(define (quat x y z w) (quat4.create (list x y z w)))\n\n(define (qaxisangle axis angle)\n  (let ((angle (* angle 0.017453292)))\n    (let ((axis (vmul (vnormalise axis) (sin (/ angle 2)))))\n      (quat (vx axis) (vy axis) (vz axis) (cos (/ angle 2))))))\n\n(define (qnormalise q)  (quat4.normalise q))\n(define (qmul a b) (quat4.multiply a b))\n(define (q->m q) (quat4.toMat4 q))\n(define (qslerp a b t) \n  (let ((r (quat 0 0 0 0)))\n    (quat4.slerp a b t r)))\n\n;; note - operations (and above) destructive but faster - todo: fix\n\n(define (midentity) (mat4.identity (mat4.create)))\n(define (minverse m) (mat4.inverse m))\n(define (mmul a b) (mat4.multiply a b))\n(define (mtransform m v) (mat4.multiplyVec3 m v))\n(define (mtranslate m v) (mat4.translate m v))\n(define (mscale m v) (mat4.scale m v))\n(define (mrotate m axis angle) (mat4.rotate m angle axis))\n\n\n(define (maim2 m v up)\n  (let ((l (vector 0 0 0))\n\t(u (vector 0 0 0))\n        (aim-matrix (mat4.create)))\n    (vec3.cross v up l)\n    (vec3.cross v l u)\n\n    (js \"aim_matrix[0]=vx(v);\")\n    (js \"aim_matrix[1]=vy(v);\")\n    (js \"aim_matrix[2]=vz(v);\")\n    (js \"aim_matrix[3]=0;\")\n\n    (js \"aim_matrix[4]=vx(l);\")\n    (js \"aim_matrix[5]=vy(l);\")\n    (js \"aim_matrix[6]=vz(l);\")\n    (js \"aim_matrix[7]=0;\")\n\n    (js \"aim_matrix[8]=vx(u);\")\n    (js \"aim_matrix[9]=vy(u);\")\n    (js \"aim_matrix[10]=vz(u);\")\n    (js \"aim_matrix[11]=0;\")\n\n    (js \"aim_matrix[12]=0;\")\n    (js \"aim_matrix[13]=0;\")\n    (js \"aim_matrix[14]=0;\")\n    (js \"aim_matrix[15]=1;\")\n\n    (mat4.multiply m aim-matrix)))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (maths-unit-test)\n  (assert (feq? (sqrt 25) 5) \"sqrt\")\n  (assert (feq? (pow 3 2) 7) \"pow\")\n  (assert (eq? (square 10) 100) \"square\")\n  (assert (eq? (trunc 40.4) 40) \"trunc\")\n  (assert (feq? 20.4 20.4) \"feq? 1\")\n  (assert (not (feq? 20.4 20.42)) \"feq? 2\")\n  (let ((v (vector 1 2 3)))\n    (assert (feq? (vx v) 1) \"vx\")\n    (assert (feq? (vy v) 2) \"vy\")\n    (assert (feq? (vz v) 3) \"vz\")\n    (assert (veq? v (vector 1 2 3)) \"veq? 1\") \n    (assert (not (veq? v (vector 30 20 30))) \"veq? 2\") \n    (let ((vc (vector-clone v)))\n      (assert (veq? vc (vector 1 2 3)) \"vector-clone 1\")\n      (set! vc (vector 0 0 0))\n      (assert (veq? v (vector 1 2 3)) \"vector-clone 2\"))\n    (assert (veq? (vadd v (vector 1 1 1)) (vector 2 3 4)) \"vadd\")\n    (assert (feq? (vmag (vector 10 0 0)) 10) \"vmag\")\n    (assert (veq? (vsub v (vector 2 2 2)) (vector -1 0 1)) \"vsub\")\n    (assert (veq? (vneg v) (vector -1 -2 -3)) \"vneg\")\n    (assert (veq? (vmul v 10) (vector 10 20 30)) \"vmul\")\n    (assert (veq? (vdiv v 2) (vector 0.5 1 1.5)) \"vdiv\")\n    (assert (feq? (vdist (vector 10 0 0) (vector 0 0 0)) 10) \"vdist\")\n    (assert (veq? (vlerp (vector 0 0 0) (vector 10 20 30) 0.5)\n\t\t  (vector 5 10 15)) \"vlerp\")\n    (assert (feq? (vmag (vnormalise (vector 1 4 923))) 1) \"vnormalise\")\n    (assert (feq? (vdot (vector 0 0 0) (vector 10 0 0)) 10) \"vdot\")\n    (assert (feq? (vcross (vector 1 0 0) (vector 0 1 0)) (vector 0 0 1)) \n\t    \"vcross\")\n    ;; todo: add quat and matrix\n    )))\n\n(maths-unit-test)\n", "flx/scm/pdata.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n;; pdata objects store the data so they can be manipulated, then\n;; re-uploaded using the GL VBO handle.\n;; todo:\n;; - choice of separate or interleaved (faster when modifying one type)\n;; - ability to delete CPU copies\n\n(define (make-pdata names size-verts interleaved-data)\n  (list names size-verts interleaved-data 0))\n\n(define (pdata-names v) (list-ref v 0))\n(define (pdata-modify-names! p v) (set! p (list-replace p 0 v)))\n(define (pdata-size-verts v) (list-ref v 1))\n(define (pdata-interleaved-data v) (list-ref v 2))\n(define (pdata-modify-interleaved-data! p v) (set! p (list-replace p 2 v)))\n(define (pdata-vbo v) (list-ref v 3))\n\n(define (pdata-build-vbo gl v)\n  ;;(msg (+ \"building vbo of size \" (length (pdata-interleaved-data v)) \" floats\"))\n  (let ((vb (gl.createBuffer)))\n    (gl.bindBuffer gl.ARRAY_BUFFER vb)\n    (gl.bufferData gl.ARRAY_BUFFER (new Float32Array (length (pdata-interleaved-data v))) gl.STATIC_DRAW)\n    (list-replace v 3 vb)))\n\n(define (pdata-update-vbo! gl v)\n  (gl.bindBuffer gl.ARRAY_BUFFER (pdata-vbo v))\n  (gl.bufferData gl.ARRAY_BUFFER (new Float32Array (pdata-interleaved-data v)) gl.STATIC_DRAW))\n\n(define (pdata-internal-add! gl v name)\n  (let ((oldcount (length (pdata-names v))))\n    (pdata-modify-names! v (append (pdata-names v) name))\n    (pdata-modify-interleaved-data! \n     v (pdata-insert-util (pdata-interleaved-data v) \n\t\t\t  oldcount (vector 0 0 0))))\n  (pdata-build-vbo gl v)\n  (pdata-update-vbo! gl v))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\n;; take a list of lists of vertex data, and output a \n;; single interleaved list\n(define (pdata-interleave-pdata-util data)\n  (js \"var ret=[];\")\n  (js \"for (var i=0; i<data[0].length; i+=3) {\") \n  (js \"  for (var d=0; d<data.length; d++) {\")\n  (js \"    ret.push(data[d][i]);\")\n  (js \"    ret.push(data[d][i+1]);\")\n  (js \"    ret.push(data[d][i+2]);\")\n  (js \"  }\")\n  (js \"}\")\n  ret)\n\n;; adds a new list to the interleaved data\n(define (pdata-insert-util data oldcount default-vector)\n  (js \"var ret=[];\")\n  (js \"var count=0;\")\n  (js \"for (var i=0; i<data.length; i+=3) {\") \n  (js \"  ret.push(data[i]);\")\n  (js \"  ret.push(data[i+1]);\")\n  (js \"  ret.push(data[i+2]);\")\n  (js \"  if (count===oldcount-1) {\")\n  (js \"    ret.push(default_vector[0]);\")\n  (js \"    ret.push(default_vector[1]);\")\n  (js \"    ret.push(default_vector[2]);\")\n  (js \"    count=-1;\")\n  (js \"  }\")\n  (js \" count++;\")\n  (js \"}\")\n  ret)\n\n(define (stride-map fn interleaved stride offset)\n  (js \"for (var stride_map_i=offset; stride_map_i<interleaved.length; stride_map_i+=stride) {\")\n  (js \"var stride_map_v=fn([interleaved[stride_map_i],interleaved[stride_map_i+1],interleaved[stride_map_i+2]]);\")\n  (js \"interleaved[stride_map_i]=stride_map_v[0];\")\n  (js \"interleaved[stride_map_i+1]=stride_map_v[1];\")\n  (js \"interleaved[stride_map_i+2]=stride_map_v[2];\")\n  (js \"};\")\n  interleaved)\n\n(define (pdata-offset v name)\n  (define (_ names r)\n    (cond\n     ((null? names) #f)\n     ((eq? name (car names)) r)\n     (else (_ (cdr names) (+ r 3)))))\n  (_ (pdata-names v) 0))\n\n;; old fast hardcoded version - perhaps for default types if slow\n;  (cond ((eq? name \"p\") 0)\n;\t((eq? name \"n\") 3)\n;\t((eq? name \"t\") 6)\n;\t(else 9)))\n\n(define (pdata-internal-map! gl v fn name)\n  (let ((offset (pdata-offset v name)))  \n    (let ((stride (* (length (pdata-names v)) 3))) \n      (pdata-modify-interleaved-data!\n       v (stride-map fn (pdata-interleaved-data v) stride offset))\n      ;; might want to do this separately as it\'s potentially slow\n      (pdata-update-vbo! gl v))))\n\n(define (pdata-internal-set! gl pdata name pos value)\n  (let ((offset (pdata-offset pdata name)))  \n    (let ((stride (* (length (pdata-names pdata)) 3)))\n      ;; (when (> (+ offset (* pos stride)) \n      ;; \t       (length (pdata-interleaved-data pdata))) \n      ;; \t    (msg (+ offset (* pos stride)))\n      ;; \t    (msg (length (pdata-interleaved-data pdata)))\n      ;; \t    (msg \"WOT\")\n      ;; \t    (welw)\n      ;; \t    )\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride]=value[0];\")\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride+1]=value[1];\")\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride+2]=value[2];\"))))\n\n(define (pdata-internal-ref gl pdata name pos)\n  (let ((offset (pdata-offset pdata name)))  \n    (let ((stride (* (length (pdata-names pdata)) 3))) \n      (vector\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride]\")\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride+1]\")\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride+2]\")))))\n\n;; stick em out here to avoid allocation all the time\n(define model-view (mat4.create))\n(define local (mat4.create))\n(define normal (mat4.create))\n\n(define (pdata-render pdata gl view-camera camera-pos state tx)\n  (let ((shader (state-shader state))\n\t(texture (state-texture state))\n\t(colour (state-colour state))\n\t(hints (state-hints state)))\n\n    (mat4.multiply tx (state-tx state) local)\n    (mat4.multiply view-camera local model-view)\n    (mat4.toRotationMat local normal)\n    \n    (gl.useProgram shader)\n    (gl.bindBuffer gl.ARRAY_BUFFER (pdata-vbo pdata))\n\n    ;; set uniforms\n    (apply-uniform-items! gl shader (state-uniform-items state))\n    \n    ;; 12 bytes for 3 floats...\n    (define total-bytes (* (length (pdata-names pdata)) 12))\n\n    (index-for-each\n     (lambda (index name)\n       (gl.enableVertexAttribArray index)\n       (gl.vertexAttribPointer \n\tindex 3 gl.FLOAT false total-bytes (* index 12)))\n     (pdata-names pdata))\n\n    (if (eq? texture \"\")\n\t(bind-texture gl shader \"white.png\")\n\t(bind-texture gl shader texture))\n    \n    (gl.uniformMatrix4fv shader.ModelViewMatrix false model-view)\n    (gl.uniformMatrix4fv shader.NormalMatrix false normal)\n\n    (gl.uniform3fv shader.DiffuseColour colour)\n    (gl.uniform3fv shader.CameraPos camera-pos)\n\n    (when (bitwise-and hints FLX_HINT_SOLID)\n\t  (gl.drawArrays gl.TRIANGLES 0 (pdata-size-verts pdata))) \n    (when (bitwise-and hints FLX_HINT_WIRE)\n\t  (gl.drawArrays gl.LINE_STRIP 0 (pdata-size-verts pdata)))\n    ))\n"});
          init_static(';; -*- mode: scheme; -*-\n\
;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n\
;;\n\
;; This program is free software: you can redistribute it and/or modify\n\
;; it under the terms of the GNU Affero General Public License as\n\
;; published by the Free Software Foundation, either version 3 of the\n\
;; License, or (at your option) any later version.\n\
;;\n\
;; This program is distributed in the hope that it will be useful,\n\
;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n\
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\
;; GNU Affero General Public License for more details.\n\
;;\n\
;; You should have received a copy of the GNU Affero General Public License\n\
;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\
\n\
;; todo make data-driven and make define-syntax!\n\
(define ret (lambda (code)\n\
  (cond\n\
   ((not (list? code)) code)\n\
   ((null? code) ())\n\
\n\
   ;; with-state\n\
   ((eq? (car code) "with_state")\n\
    (append\n\
     (list "begin" (list "push"))\n\
      (list (list "let"\n\
                  (list (list "with_state_ret" (append (list "begin") (do-syntax (cdr code)))))\n\
                  (list "pop") "with_state_ret"))))\n\
\n\
   ;; with-primitive\n\
   ((eq? (car code) "with_primitive")\n\
    (append\n\
     (list "begin" (list "grab" (cadr code)))\n\
     (list (list "let"\n\
                 (list (list "with_primitive_ret" (append (list "begin") (do-syntax (cdr code)))))\n\
                 (list "ungrab") "with_primitive_ret"))))\n\
\n\
   ((eq? (car code) "every_frame")\n\
    (append\n\
     (list "every_frame_impl")\n\
     (list\n\
      (list "lambda" (list)\n\
            (do-syntax (cdr code))))))\n\
\n\
\n\
   ;; define a function\n\
   ((and\n\
     (eq? (car code) "define")\n\
     (list? (cadr code)))\n\
    (let ((name (car (cadr code)))\n\
          (args (cdr (cadr code)))\n\
          (body (do-syntax (cdr (cdr code)))))\n\
      (list "define" name (append (list "lambda" args) body))))\n\
\n\
   (else (cons (do-syntax (car code))\n\
               (do-syntax (cdr code)))))))\n\
\n\
ret\n\
',';; -*- mode: scheme; -*-\n\
;; Royal Soc Malaria Copyright (C) 2018 FoAM Kernow\n\
\n\
;; This program is free software: you can redistribute it and/or modify\n\
;; it under the terms of the GNU Affero General Public License as\n\
;; published by the Free Software Foundation, either version 3 of the\n\
;; License, or (at your option) any later version.\n\
;;\n\
;; This program is distributed in the hope that it will be useful,\n\
;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n\
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\
;; GNU Affero General Public License for more details.\n\
;;\n\
;; You should have received a copy of the GNU Affero General Public License\n\
;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\
\n\
(load "flx/scm/fluxus.jscm")\n\
(load "flx/scm/canvas.jscm")\n\
(load "flx/scm/canvas-widgets.jscm")\n\
\n\
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\
\n\
(define lifespan (* 70 365))\n\
(define D 30)\n\
(define beta 1)\n\
(define R0 (/ beta (+ (/ 1 lifespan) (/ 1 D))))\n\
\n\
(define (predY P phiD phiB beta)\n\
  (let ((mu (/ 1 lifespan)))\n\
    (max 0 (* mu (- (* (- 1 P) (- 1 phiD) D)\n\
                    (/ 1 (* (- 1.000001 phiB) beta)))))))\n\
\n\
(define num-people 1000)\n\
(define infected-threshold 0.0001)\n\
\n\
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\
\n\
(define (read-map x y) \n\
  (let ((t (map-ctx.getImageData x (- 512 y) 1 1)))\n\
    (list-ref t.data 0)))\n\
\n\
(define (generate-map-pos)\n\
  (let ((p (vmul (vector (rndf) (rndf) 0) 512)))\n\
    (let ((d (read-map (vx p) (vy p))))\n\
      (if (< (* (rndf) 255) (* (square (/ d 255)) 255))\n\
	  ;; return density squashed to 0-50\n\
	  (list (* d (/ 50 255)) p) (generate-map-pos)))))\n\
\n\
(define (make-person pos infected density root) (list pos infected density root))\n\
(define (person-pos p) (list-ref p 0))\n\
(define (person-infected p) (list-ref p 1))\n\
(define (person-density p) (list-ref p 2))\n\
(define (person-root p) (list-ref p 3))\n\
\n\
(define (build-person density pos)\n\
  (make-person\n\
   pos\n\
   #f\n\
   density\n\
   (with-state\n\
    (colour (vector 1 1 1))\n\
    (shader-assign-compiled "person")\n\
    (translate (vmul (vsub pos (vector 256 256 0)) 0.05))\n\
    (load-primitive "models/plane.obj"))))\n\
\n\
(define (update-person p y)\n\
  (with-primitive \n\
   (person-root p)\n\
   (if (> y infected-threshold)\n\
       (colour (vector 1 0 0))\n\
       (colour (vector 1 1 1))))\n\
  p)\n\
\n\
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\
;; 2D schenanigans\n\
\n\
(define vaccination-slider \n\
  (make-slider 50 550 300 (- 300 90)\n\
	       (lambda (v)\n\
		 (set! vaccination (/ v 300))\n\
		 (clamp-sliders!)\n\
		 )))\n\
\n\
(define drugs-slider \n\
  (make-slider 50 600 300 (- 300 90)\n\
	       (lambda (v)\n\
		 (set! drugs (/ v 300))\n\
		 (clamp-sliders!)\n\
		 )))\n\
\n\
(define bednets-slider \n\
  (make-slider 50 650 300 (- 300 90)\n\
	       (lambda (v)\n\
		 (set! bednets (/ v 300))\n\
		 (clamp-sliders!)\n\
		 )))\n\
\n\
(define (clamp-sliders!)\n\
  (set! people\n\
  	(map\n\
  	 (lambda (p)\n\
  	   (update-person \n\
  	    p \n\
  	    (predY vaccination drugs bednets (person-density p))))\n\
  	 people))\n\
\n\
  (let ((vs (/ (slider-p vaccination-slider) 300))\n\
	(ds (/ (slider-p drugs-slider) 300))\n\
	(bs (/ (slider-p bednets-slider) 300)))\n\
    (let ((mag (sqrt (+ (square vs) (square ds) (square bs)))))\n\
      (when (> mag 1)\n\
	    (set! vaccination-slider (slider-update-p vaccination-slider (* (/ vs mag) 300)))\n\
	    (set! drugs-slider (slider-update-p drugs-slider (* (/ ds mag) 300)))\n\
	    (set! bednets-slider (slider-update-p bednets-slider (* (/ bs mag) 300))))))\n\
  )\n\
\n\
(define (render-canvas)\n\
  (set! vaccination-slider (slider-update vaccination-slider))\n\
  (slider-render! vaccination-slider)\n\
  (set! drugs-slider (slider-update drugs-slider))\n\
  (slider-render! drugs-slider)\n\
  (set! bednets-slider (slider-update bednets-slider))\n\
  (slider-render! bednets-slider))\n\
\n\
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\
;; preload things\n\
\n\
(shader-compile "default" (list "p" "n" "t" "c")\n\
		"shaders/default.vert"\n\
		"shaders/default.frag")\n\
(shader-compile "person" (list "p" "n" "t" "c")\n\
		"shaders/person.vert"\n\
		"shaders/person.frag")\n\
\n\
(load-texture "map.png")\n\
(load-mesh-cache "models/circlefan.obj")\n\
(load-mesh-cache "models/plane.obj")\n\
\n\
(load-images!\n\
 (list\n\
  "vial-a.png"\n\
  )\n\
 (lambda ()\n\
   0))\n\
\n\
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\
\n\
(define people \'())\n\
\n\
(define (reset-game!)\n\
  0)\n\
\n\
(define vaccination 0.6)\n\
(define drugs 0)\n\
(define bednets 0)\n\
\n\
(define (render-game)\n\
  (resize-glcanvas webgl-canvas)\n\
  (resize-canvas canvas)\n\
  \n\
  (ctx.clearRect 0 0 screen-width screen-height)	  \n\
  (render-canvas)  \n\
  )\n\
\n\
(define init #f)\n\
(define map-canvas 0)\n\
(define map-ctx 0)\n\
\n\
(define (run-init)\n\
  (resize-glcanvas webgl-canvas)\n\
  (canvas-setup)\n\
  (resize-canvas canvas)\n\
\n\
  ;; draw the map into a context so we can read pixels\n\
  ;; out of it...\n\
  ;; need to load it from static data due to cross origin rules\n\
  (load-resource-img \n\
   "textures/map.png" \n\
   (lambda (img)\n\
     (set! map-canvas (document.createElement "canvas"))\n\
     (set! map-canvas.width img.width)\n\
     (set! map-canvas.height img.height)\n\
     (msg img.width)\n\
     (msg img.height)\n\
     (set! map-ctx (map-canvas.getContext "2d")) \n\
     (map-ctx.drawImage img 0 0)\n\
     (set! people \n\
	   (build-list \n\
	    num-people\n\
	    (lambda (i) \n\
	      (let ((t (generate-map-pos)))\n\
		(msg \n\
		 (predY vaccination drugs bednets (car t)))\n\
		(build-person (car t) (cadr t))))))))\n\
  \n\
;;  (set-camera-transform (mtranslate (camera-transform) (vector 0 5 0)))\n\
  (clear-colour (list 0.0 0.0 0.0 0.0)))\n\
\n\
(define (flot)\n\
  (when  (and\n\
	  (not init)\n\
;;	  (meshes-loaded?)\n\
	  (textures-loaded?)\n\
	  (shaders-loaded?)\n\
	  (canvas-loaded?)\n\
	  )\n\
	 (set! init #t)\n\
	 (run-init)	 \n\
	 (every-frame render-game)))\n\
\n\
(resize-canvas canvas)\n\
(ctx.fillText "Loading..." 100 100)\n\
\n\
(every-frame (flot))\n\
	 \n\
');    
      });
    </script>
</body>
</html>
